if (self.CavalryLogger) { CavalryLogger.start_js(["7FXfZ"]); }

__d("VideoViewabilityKeyEvents",[],(function(a,b,c,d,e,f){e.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("MCustomDialog",["cx","DOM","ge"],(function(a,b,c,d,e,f,g){f.show=a;function a(a){var c,d=(c=b("DOM")).create("div",{className:"_3uug"},null),e=c.create("div",{className:"_3uuh"},c.create("h2",null,a.titleString)),f=c.create("div",{className:"_3uui"},c.create("p",null,a.descriptionString)),g=c.create("p",{className:"_3uuj"},a.dismissButtonString),h=c.create("div",{className:"_3uuk"},g);c.appendContent(d,e);c.appendContent(d,f);c.appendContent(d,h);if(a.confirmButtonString&&a.confirmButtonCallback){var i=b("DOM").create("p",{className:"_3uuj"},a.confirmButtonString);b("DOM").prependContent(h,i)}var j=b("DOM").create("div",{className:"_3uul"},d);g.addEventListener("click",function(){b("DOM").remove(j),a.dismissButtonCallback&&a.dismissButtonCallback()});i&&i.addEventListener("click",function(){b("DOM").remove(j),a.confirmButtonCallback&&a.confirmButtonCallback()});e=b("ge")("root");e&&b("DOM").prependContent(e,j)}}),null);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function(a,b,c,d,e,f){e.exports=a;function a(a){a===void 0&&(a={});a.dangerouslyOverrideMediaElementEndedProperty=!0;return a}a.isEnded=function(a){return!!(a&&a.detail&&a.detail.dangerouslyOverrideMediaElementEndedProperty)}}),null);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b=a;e.exports=b}),null);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f){e.exports=a;function a(a){if(a.readyState>=b("HTMLMediaElementReadyStates").HAVE_METADATA)return a.muted;else return a.hasAttribute("muted")||a.muted}}),null);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerHTML5Experiments","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState","getVideoBrowserTabId"],(function(a,b,c,d,e,f){var g=-1,h=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function i(a,b){a.time_ms=Date.now();b=b.timeStamp;if(b&&h){var c=Math.floor(b).toString().length,d=Date.now().toString().length,e=window.performance.now();if(c===d+3)b=Math.floor(b/1e3),a.time_ms=b;else if(c===d)a.time_ms=b;else if(b<=e){c=window.performance.timing.navigationStart;a.time_ms=c+Math.floor(b)}}return a}a={initLogger:function(a,c,d,e,f,h,i){var j=this;this._loggedEvents={};this._logFunction=a;this._fixOverwrittenGetVideoCurrentTime=e;this._fireSeekEvents=f;this._useEventTime=c;this._recentPausedTime=null;this._audioOnly=!1;this._enablePlaybackSpeedLogging=i;var k=this.getVideoElement();if(h){var l=k.pause;k.pause=function(){j._recentPausedTime=k.currentTime;return l.apply(k)}}d&&(this._overwriteVideoCurrentTimeProperty(k),this._didOverwriteVideoCurrentTimeProperty||(this.preventSeekLoggingInMixin=!0));this._lastStartTimePosition=g;this._muted=b("getHTMLMediaElementMutedState")(k);this._pausedPosition=g;this._seeking=!1;this._seekSourceTimePosition=g;this._currentTimeAtSeekStart=g;this._volume=k.volume;this._hasBlockedPausedRepresentationEnded=!1;this._logNextPlayingEvent=!0;this._lastLoggedPlaybackSpeed=null;this._lastPlayedTime=g;a=!1;k.readyState>=k.HAVE_FUTURE_DATA?this._logReadyToPlay():a=!0;if(this.skipSubscriptions())return;e=this.getSubscriptions();a&&e.addSubscriptions(b("EventListener").listen(k,"canplay",this._logReadyToPlay.bind(this)));e.addSubscriptions(b("EventListener").listen(k,"ended",this.onEnded.bind(this)),b("EventListener").listen(k,"pause",this.onPause.bind(this)),b("EventListener").listen(k,"playing",this.onPlaying.bind(this)),b("EventListener").listen(k,"seeked",this.onSeeked.bind(this)),b("EventListener").listen(k,"seeking",this.onSeeking.bind(this)),b("EventListener").listen(k,"play",this.onPlay.bind(this)),b("EventListener").listen(k,"loadedmetadata",this.onLoadedMetadata.bind(this)),b("EventListener").listen(k,"timeupdate",this.onTimeUpdate.bind(this)),b("EventListener").listen(k,"volumechange",this.onVolumeChange.bind(this)));this._enablePlaybackSpeedLogging&&e.addSubscriptions(b("EventListener").listen(k,"ratechange",this.onPlaybackRateChange.bind(this)))},skipSubscriptions:function(){return!1},onCanPlay:function(a){this._logReadyToPlay(a)},onPlay:function(a){this._logNextPlayingEvent=!0,this._ignoreNextPlaying=!1,this._pendingPlayRequest=!0},logHeartbeat:function(){if(b("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTime){this._logEvent("heart_beat",this._getWatchTimeClosingLogData({}));var a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}else this._logEvent("heart_beat")},_getWatchTimeClosingLogData:function(a){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},a))},_logOnce:function(a,b){if(this._loggedEvents[a])return;this._logEvent(a,b)},setAudioOnly:function(a){this._audioOnly=a},_logEvent:function(a,c){this._loggedEvents[a]=!0;c=c?c:{};c.video_id=this.getVideoID();c.browser_tab_id=b("getVideoBrowserTabId")();this._audioOnly&&(c.audio_only=!0);c.has_blocked_paused_representation_ended=this._hasBlockedPausedRepresentationEnded;Object.prototype.hasOwnProperty.call(c,"video_time_position")||(c.video_time_position=this._getVideoCurrentTime());c.time_ms||(c.time_ms=Date.now());c.time=Math.round(c.time_ms/1e3);if(this.getAdClientToken){var d=this.getAdClientToken();d&&(c.ad_client_token=d)}this.getPlayerFormat&&(c.player_format=this.getPlayerFormat());this.getPlayerOrigin&&(c.player_origin=this.getPlayerOrigin());this.getPlayerSuborigin&&(c.player_suborigin=this.getPlayerSuborigin());if(this._enablePlaybackSpeedLogging){d=this.getVideoElement().playbackRate;d=d!==0?d:this._lastLoggedPlaybackSpeed;c.current_playback_speed=d;this._lastLoggedPlaybackSpeed=d}this._logFunction(a,c)},_logReadyToPlay:function(){return},__setPendingPlayRequest:function(a){this._pendingPlayRequest=a},onPause:function(a){this._logNextPlayingEvent=!0;var c=this.getVideoElement();if(this._pendingPlayRequest){var d={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=!1;this._logEvent("cancelled_requested_playing",d);return}d=!!this._getVideoPlayerShakaConfig();d=c.ended||d&&b("dangerouslyOverrideMediaElementEndedProperty").isEnded(a)?"finished_playing":"paused";var e=this._recentPausedTime==null?this._getVideoCurrentTime():this._recentPausedTime;this._recentPausedTime=null;e&&(this._lastPlayedTime=e);e=this._lastPlayedTime;var f=this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition;b("VideoPlayerHTML5Experiments").preventNegativeTimePositions&&(this._lastPlayedTime<0&&(e=0,this._lastStartTimePosition<0&&(f=0)));var h=a.lastPauseReason;if(d==="finished_playing")e=Math.max(e,c.duration);else if(this.preventPauseLoggingInMixin===!0)return;else this.preventPauseLoggingInMixin===!1&&(h=h||"unloaded");this._logEvent(d,this._amendEventTime({video_last_start_time_position:f,video_time_position:e,debug_reason:h},a));this._lastStartTimePosition=g},onEnded:function(){this._logNextPlayingEvent=!0,this._lastStartTimePosition!==g&&b("UserAgent").isBrowser("IE")&&this.onPause({})},onBlockedPausedRepresentationEnded:function(){this._hasBlockedPausedRepresentationEnded=!0},logRepresentationEnded:function(a){if(a){a={representation_id:a.representationID,next_representation_id:a.nextRepresentationID,stream_switch_reason:a.streamSwitchReason};b("VideoPlayerHTML5Experiments").newStateChangeCalculation&&(a=this._getWatchTimeClosingLogData(a));this._logEvent("representation_ended",a);if(b("VideoPlayerHTML5Experiments").newStateChangeCalculation){a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}}},addWatchTimeData:function(a){this._lastStartTimePosition!=g&&this._lastPlayedTime!=g&&(a.video_last_start_time_position=this._lastStartTimePosition,a.video_time_position=this._lastPlayedTime,this._lastStartTimePosition=g);return a},getLastPlayReason:function(){return null},getVideoPlayReason:function(){return null},onPlaying:function(a){if(!this._logNextPlayingEvent)return;b("VideoPlayerHTML5Experiments").superficialUnpauseEventsFix&&(this._logNextPlayingEvent=!1);if(this._ignoreNextPlaying){this._ignoreNextPlaying=!1;return}var c=this.getLastPlayReason();this._pendingPlayRequest=!1;var d=this._loggedEvents.started_playing?"unpaused":"started_playing";c=this._amendEventTime({debug_reason:c,video_play_reason:this.getVideoPlayReason()},a);a=this._getVideoCurrentTime();if(b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment){var e=this.getVideoElement().currentTime;e=e-a;c.time_ms-=Math.round(e*1e3)}this._logEvent(d,c);this._lastStartTimePosition=a;this._lastPlayedTime=a;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function(){this._allowNextSeek=!0},onSeeked:function(a){this._seeking=!1;var b=this._seekSourceTimePosition;this._seekSourceTimePosition=g;var c=this._currentTimeAtSeekStart;this._currentTimeAtSeekStart=g;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){this._pendingPlayRequest||(this._ignoreNextPlaying=!0);return}this._allowNextSeek=!1;this._ignoreNextPlaying=!1;var d={video_seek_source_time_position:b,video_last_start_time_position:b};this._fixOvewrittenGetVideoCurrentTime&&(d.video_seek_source_time_position=c);this.preventSeekLoggingInMixin&&(this._lastStartTimePosition!==g?d.video_last_start_time_position=this._lastStartTimePosition:d.video_last_start_time_position=b);b="scrubbed";this._fireSeekEvents&&(b="seeked",d={seek_from_video_time_position:c});this._logEvent(b,this._amendEventTime(d,a));c=this.getVideoElement();c.paused?this._lastStartTimePosition=g:this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function(a){this._currentTimeAtLoadedMetadataCache=null;this._seeking||(this._seekSourceTimePosition=this._getVideoCurrentTime(),this._seeking=!0);if(this._fixOverwrittenGetVideoCurrentTime)return;this._currentTimeAtSeekStart=g},onTimeUpdate:function(a){this._currentTimeAtLoadedMetadataCache=null;a=this.getVideoElement();a.paused||(this._lastPlayedTime=this._getVideoCurrentTime())},onPlaybackRateChange:function(a){var b=this.getVideoElement();b=b.playbackRate;this._lastLoggedPlaybackSpeed!=null&&b!==0&&b!==this._lastLoggedPlaybackSpeed&&this._logEvent("playback_speed_changed",this._amendEventTime({},a))},onVolumeChange:function(a){var c=this.getVideoElement(),d={},e=null;if(b("VideoPlayerHTML5Experiments").useFixedVolumeLogging){var f=c.muted,g=this._muted,h=c.volume,i=this._volume;d.current_volume=Math.round(h*100);this._volume=h;this._muted=f;f=f||h==0;g=g||i==0;if(g&&f)return;if(g!=f)f?e="muted":e="unmuted";else{if(i==h)return;h<i?e="volume_decrease":e="volume_increase"}}else c.muted!==this._muted&&c.volume===this._volume&&c.volume>0?e=c.muted?"muted":"unmuted":(e=c.volume>this._volume?"volume_increase":"volume_decrease",d.current_volume=Math.round(c.volume*100)),this._muted=c.muted,this._volume=c.volume;this._logEvent(e,this._amendEventTime(d,a))},_amendEventTime:function(a,c){var d=this._useEventTime;b("VideoPlayerHTML5Experiments").fixEventTimeLogging&&(d=d&&c);if(d)return i(a,c);else a.time_ms=Date.now();return a},_getVideoCurrentTime:function(){var a;this._fixOverwrittenGetVideoCurrentTime?a=this.getVideoElement().currentTime:a=this._currentTimeAtSeekStart===g?this.getVideoElement().currentTime:this._currentTimeAtSeekStart;a=a.toFixed(2);b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment&&(this._currentTimeAtLoadedMetadataCache!=null&&(a=this._currentTimeAtLoadedMetadataCache.toFixed(2)));return b("VideoPlayerHTML5Experiments").fixCurrentTimeType?+a:a},_getVideoPlayerShakaConfig:function(){return this.getVideoPlayerShakaConfig&&typeof this.getVideoPlayerShakaConfig==="function"?this.getVideoPlayerShakaConfig():null},onLoadedMetadata:function(a){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime},_overwriteVideoCurrentTimeProperty:function(a){var b=this;this._didOverwriteVideoCurrentTimeProperty=!1;try{var c=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");if(!c)return;if(typeof c.get!=="function"||typeof c.set!=="function")return;Object.defineProperty&&Object.defineProperty(a,"currentTime",{get:function(){return c.get.call(this)},set:function(d){b._currentTimeAtSeekStart===g&&(b._currentTimeAtSeekStart=c.get.call(a)),c.set.call(a,d)},configurable:!0,enumerable:!0});this._didOverwriteVideoCurrentTimeProperty=!0}catch(a){}}};e.exports=a}),null);
__d("HVideoPlayerLoggerMixin",["EventListener","HVideoPlayerMixin","VideoPlayerLogger"],(function(a,b,c,d,e,f){a={};c={initLogger:function(){var a=this;b("EventListener").listen(this.getVideoElement(),"play",function(){return a._onPlayLogUnmute()});this._logger=new(b("VideoPlayerLogger"))(b("VideoPlayerLogger").Sources.HTML5);var c=function(b,c){var d=a.getSavedOffline(),e=a.getConnectivityType(),f=a.getResourceUrl(),g=a.getIsAdsPreview();c=babelHelpers["extends"]({},c,{saved_offline:d,connectivity_type:e,resource_url:f,is_ads_preview:g});b==="unmuted"&&(a._unmutedWasLogged=!0);c=Object.assign(c,a.getAdditionalLogData(b));a._logger.logEvent(b,c)};b("HVideoPlayerMixin").initLogger.call(this,c)},_onPlayLogUnmute:function(){var a=this.getLastPlayReason();!this._unmutedWasLogged&&this.getVideoElement()&&!this.getVideoElement().muted&&a=="user_initiated"&&this._logEvent("unmuted")},getLogger:function(){return this._logger},getAdClientToken:function(){var a=this.getVideoData();return a.adClientToken?a.adClientToken:null},getSavedOffline:function(){return null},logDisplayed:function(){this._logEvent("displayed",{is_auto_played:!0})},logPauseEvent:function(a){this.onPause(a?a:{})},logEvent:function(a,b){this._logEvent(a,b)}};Object.assign(a,b("HVideoPlayerMixin"));Object.assign(a,c);e.exports=a}),null);
__d("MInlineVideoDebugger",["CSS","DOM","MVideoUtils"],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$6=b,this.$7(a),this.$8(),this.$9(),this.$10(),this.$11()}var c=a.prototype;c.$7=function(a){this.$1=b("DOM").create("div"),b("CSS").conditionClass(this.$1,b("MVideoUtils").DEBUGGER_CLASS,!0),b("DOM").insertAfter(a,this.$1)};c.$8=function(){this.$2=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$2)};c.$9=function(){this.$3=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$3)};c.$10=function(){this.$4=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$4)};c.$11=function(){this.$5=b("DOM").create("div"),b("DOM").appendContent(this.$1,this.$5),this.updateVideoIdDebugger(this.$6.videoID)};c.updateViewabilityLoggingDebugger=function(a){b("DOM").setContent(this.$2,"viewability:"+a)};c.updatePlayerStateDebugger=function(a){b("DOM").setContent(this.$3,"player state:"+a)};c.updateLastActionReasonDebugger=function(a){b("DOM").setContent(this.$4,"lastActionReason:"+a)};c.updateVideoIdDebugger=function(a){b("DOM").setContent(this.$5,"video ID:"+a)};c.cleanUp=function(){b("DOM").remove(this.$1)};return a}();e.exports=a}),null);
__d("Network",["mixInEventEmitter","$InternalEnum"],(function(a,b,c,d,e,f){var g=!0,h=a.navigator.connection,i={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"},j=b("$InternalEnum")({Bluetooth:"bluetooth",Cellular:"cellular",Ethernet:"ethernet",None:"none",Wifi:"wifi",Wimax:"wimax",Other:"other",Unavailable:"unavailable",Unknown:"unknown"}),k=b("$InternalEnum")({Type_Slow2g:"slow-2g",Type_2g:"2g",Type_3g:"3g",Type_4g:"4g",Unavailable:"unavailable"});function l(){return g}function c(a){if(a==g)return;g=a;o.emit(a?"online":"offline")}function d(){if(!l())return 0;var a=h==null?void 0:h.downlinkMax;if(typeof a==="number"&&Number.isFinite(a))return a;a=h==null?void 0:h.downlink;return typeof a==="number"&&Number.isFinite(a)?a:null}function f(){var a=h?String(h.type):"0";return i[a]||a}function m(){var a=h==null?void 0:h.type;return(a=typeof a==="string"?j.cast(a):null)!=null?a:j.Unavailable}function n(){var a=h==null?void 0:h.effectiveType;return(a=typeof a==="string"?k.cast(a):null)!=null?a:k.Unavailable}var o={NetworkConnectivityType:j,NetworkConnectivityEffectiveType:k,getBandwidth:d,getEffectiveType:n,getType:m,getType_DEPRECATED_DO_NOT_USE:f,isOnline:l,setOnline:c};b("mixInEventEmitter")(o,{online:!0,offline:!0});a.addEventListener?(a.addEventListener("online",c.bind(null,!0)),a.addEventListener("offline",c.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",c.bind(null,!0)),a.attachEvent("offline",c.bind(null,!1)));d=o;e.exports=d}),null);
__d("MVideoNetworkUtils",["Network","gkx"],(function(a,b,c,d,e,f){"use strict";var g=b("Network").NetworkConnectivityEffectiveType,h=b("Network").NetworkConnectivityType;c={getConnectivityType:function(){if(!b("gkx")("1791036")){var a=b("Network").getType_DEPRECATED_DO_NOT_USE();if(a=="wifi"||a=="WIFI")return"WIFI";else if(a=="cellular"||a=="2g"||a=="3g"||a=="wwan")return"MOBILE";return null}switch(b("Network").getType()){case h.Bluetooth:case h.Ethernet:case h.Wifi:case h.Wimax:return"WIFI";case h.Cellular:return"MOBILE";default:break}switch(b("Network").getEffectiveType()){case g.Type_4g:return"WIFI";case g.Type_Slow2g:case g.Type_2g:case g.Type_3g:return"MOBILE";default:return null}},getNetworkBandwidth:function(){if(!b("gkx")("1791037")){var c=null;"connection"in a.navigator&&("downlinkMax"in a.navigator.connection&&(c=a.navigator.connection.downlinkMax));var d=null;try{d=parseFloat(c)}catch(a){return null}return typeof d!=="number"||isNaN(c)?null:d}return b("Network").getBandwidth()}};d=c;e.exports=d}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){var g={size:"90%"};function h(a){var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();e.exports=a}),null);
__d("MVideoSubtitles",["fbt","DOM","EventListener","SubRipText","XHRRequest","emptyFunction","getCrossOriginTransport"],(function(a,b,c,d,e,f,g){var h=a.URL||a.webkitURL;c=function(){function a(a){this.$1=a,this.$2=b("emptyFunction")}var c=a.prototype;c.$3=function(a){a=new(b("SubRipText"))(a);if("Blob"in self){a=new Blob([a.renderVTT()],{type:"text/vtt"});return h.createObjectURL(a)}return null};c.loadSubtitles=function(a){var c=this;if(!h)return;new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c.$4(c.$3(a))}).send()};c.$4=function(a){var c=this;if(a==null)return;a=b("DOM").create("track",{label:g._("Oui"),kind:"captions",src:a});b("EventListener").listen(a,"load",function(){c.$2()});b("DOM").appendContent(this.$1,a);this.hideSubtitles()};c.showSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="showing"})};c.hideSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};c.setOnSubtitlesReady=function(a){this.$2=a};return a}();e.exports=c}),null);
__d("MVideoViewability",["MFullScreen","Visibility","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f){f.shouldLog=a;f.calculateViewabilityPercentage=c;f.calculateViewabilityPercentageNumber=g;function a(a){return!!a&&a.videoViewabilityLoggingEnabled&&a.videoViewabilityLoggingPollingRate>0}function c(a){if(b("MFullScreen").isFullScreen())return 100;if(b("Visibility").isHidden())return-2;a=g(b("getElementPosition")(a));if(a===0)return-2;else if(a<25)return 0;else if(a<50)return 25;else if(a<75)return 50;else if(a<100)return 75;else return 100}function g(a){var c=b("getViewportDimensions")().width,d=b("getViewportDimensions")().height;if(a.width===0||a.height===0)return 0;var e=a.x,f=a.x+a.width,g=a.y,h=a.y+a.height;if(f<=0||e>=c||h<=0||g>=d)return 0;f=Math.min(f,c)-Math.max(e,0);c=Math.min(h,d)-Math.max(g,0);return f*c*100/(a.width*a.height)}}),null);
__d("moz-player/loggings/OzPreInitLogger",["moz-player/shims/OzEventEmitter","moz-player/loggings/OzOperationLoggerBase","moz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";var g=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzPreInitOperationLogger1=c;return a}var c=a.prototype;c.log=function(){b.prototype.log.call(this),this.$OzPreInitOperationLogger1(this)};return a}(b("moz-player/loggings/OzOperationLoggerBase"));a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$OzPreInitLoggerProvider1=!1,d.$OzPreInitLoggerProvider2=[],d.$OzPreInitLoggerProvider3=new(b("moz-player/shims/OzEventEmitter"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.deactivate=function(){this.$OzPreInitLoggerProvider1=!1};d.activate=function(){var a=this;this.$OzPreInitLoggerProvider1=!0;this.$OzPreInitLoggerProvider2.forEach(function(b){a.$OzPreInitLoggerProvider3.emit("operation_logged",b)});this.$OzPreInitLoggerProvider2=[]};d.setOperationLoggedListener=function(a){return this.$OzPreInitLoggerProvider3.addListener("operation_logged",function(b){a(b)})};d.createOperationLogger=function(a){var b=this;a=new g(a,function(a){b.$OzPreInitLoggerProvider1?b.$OzPreInitLoggerProvider3.emit("operation_logged",a):b.$OzPreInitLoggerProvider2.push(a)});return a};d.createLoggerProvider=function(){return new c()};return c}(b("moz-player/loggings/OzPerfLoggerProviderBase"));f.OzPreInitLoggerProvider=a}),null);
__d("MVideoPlayerApiBase",["invariant","Promise","Bootloader","CSS","DataAttributeUtils","DOM","EventEmitter","EventListener","HVideoPlayerLoggerMixin","MFullScreen","MInlineVideoDebugger","MParent","MVideoCache","MVideoExperiments","MVideoNetworkUtils","MVideoSubtitles","MVideoUtils","MVideoViewability","ODS","Stratcom","StratcomManager","SubscriptionsHandler","URI","VideoPlayerStateBasedLoggingEvents","VideoViewabilityKeyEvents","clearInterval","gkx","isCdnURI","mixin","moz-player/loggings/OzPreInitLogger","qex","setInterval","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g){var h,i={CONSTRUCTED:"constructed",INIT_DONE:"init_done",CREATED:"created",FIRST_PLAYING:"first_playing",PLAYING:"playing",CANCELLED_REQUEST_PLAYING:"cancelled_request_playing",PAUSE_WITHOUT_PLAY:"pause_without_play",PAUSED:"paused",ENDED:"ended",FIRST_REQUESTED_PLAYING:"first_requested_playing",REQUESTED_PLAYING:"requested_playing",FIRST_VIDEO_PLAY:"first_video_play",VIDEO_PLAY:"video_play",RESCHEDULE_VIDEO_PLAY:"reschedule_video_play",REQUESTED_PAUSE_BEFORE_STARTED_PLAYING:"requested_pause_before_started_playing",REQUESTED_PAUSE:"requested_pause",DESTROYED_REQUESTED_PLAYING:"destroyed_requested_playing",DESTROY:"destroy"},j=["canplay","play","seeked","seeking"],k=100,l=1e3/15,m=3e4;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.eventEmitter=new(b("EventEmitter"))();d.$MVideoPlayerApiBase13=!1;d.$MVideoPlayerApiBase28=!1;d.$MVideoPlayerApiBase29=0;d.$MVideoPlayerApiBase30=!1;d.$MVideoPlayerApiBase31=0;d.$MVideoPlayerApiBase32=0;d.$MVideoPlayerApiBase54=function(){var a=d.getVideoElement();b("Stratcom").invoke("m:video:player:fullscreenchange",null,{videoElement:d.$MVideoPlayerApiBase1,player:a});var c=b("MFullScreen").isFullScreen();b("MVideoExperiments").do_not_stretch_fullscreen&&b("CSS").conditionClass(a,b("MVideoUtils").FULL_WIDTH_PLAYER_CLASS,!c);d.handleFullScreenBehaviour(c,a);d.logEvent(c?"entered_fs":"exited_fs")};d.$MVideoPlayerApiBase55=function(){d.getVideoElement().readyState>=2&&d.$MVideoPlayerApiBase13&&d.$MVideoPlayerApiBase56()};d.$MVideoPlayerApiBase42=function(){b("Stratcom").invoke("m:video:player:play",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement(),videoID:d.getVideoID()}),d.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PAUSE_CLASS,!1),d.$MVideoPlayerApiBase57()};d.$MVideoPlayerApiBase43=function(){d.$MVideoPlayerApiBase41(i.FIRST_PLAYING),d.$MVideoPlayerApiBase35(i.PLAYING),d.$MVideoPlayerApiBase9=!1,b("Stratcom").invoke("m:video:player:playing",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()}),d.hideLoadingSpinner(),d.$MVideoPlayerApiBase58(),d.$MVideoPlayerApiBase24&&d.$MVideoPlayerApiBase24.log(),d.$MVideoPlayerApiBase24=null,d.heartbeatEnabled()&&d.$MVideoPlayerApiBase59(),d.eventEmitter.emit("playing")};d.$MVideoPlayerApiBase44=function(a){d.$MVideoPlayerApiBase60(),d.$MVideoPlayerApiBase9=!1,d.$MVideoPlayerApiBase24&&(d.$MVideoPlayerApiBase24.setResult("aborted").log(),d.$MVideoPlayerApiBase24=null),b("Stratcom").invoke("m:video:player:pause",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement(),destroyed:a}),b("MVideoExperiments").mtouch_prevent_consequent_calls||d.$MVideoPlayerApiBase61(!1),d.hideLoadingSpinner(),d.$MVideoPlayerApiBase62(),d.$MVideoPlayerApiBase63(),d.$MVideoPlayerApiBase64(),d.$MVideoPlayerApiBase25&&(d.$MVideoPlayerApiBase25.log(),d.$MVideoPlayerApiBase25=null),d.eventEmitter.emit("paused")};d.$MVideoPlayerApiBase45=function(){if(d.$MVideoPlayerApiBase3.loop&&d.$MVideoPlayerApiBase3.numOfLoops&&!d.$MVideoPlayerApiBase3.playEndSec&&!d.$MVideoPlayerApiBase3.playStartSec&&b("gkx")("1086729")){d.$MVideoPlayerApiBase29++;if(d.$MVideoPlayerApiBase29<d.$MVideoPlayerApiBase3.numOfLoops){d.play("loop_initiated");return}}d.$MVideoPlayerApiBase35(i.ENDED);b("Stratcom").invoke("m:video:player:ended",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement(),videoID:d.getVideoID()});d.$MVideoPlayerApiBase9=!1;d.$MVideoPlayerApiBase62();d.$MVideoPlayerApiBase3.playOnClick&&d.$MVideoPlayerApiBase3.playInFullScreen&&b("MFullScreen").isSupported()&&b("MFullScreen").disableFullScreen();d.eventEmitter.emit("finished")};d.$MVideoPlayerApiBase46=function(){d.showLoadingSpinner()};d.$MVideoPlayerApiBase50=function(){d.$MVideoPlayerApiBase9=!0};d.$MVideoPlayerApiBase51=function(){d.$MVideoPlayerApiBase9=!1,d.$MVideoPlayerApiBase7&&(d.$MVideoPlayerApiBase8=!0,d.$MVideoPlayerApiBase62(),d.logPauseEvent({lastPauseReason:"seek_initiated"}))};d.$MVideoPlayerApiBase47=function(){var a=d.getVideoElement().volume;d.$MVideoPlayerApiBase14!==void 0&&(d.$MVideoPlayerApiBase14===0&&a!==0?d.eventEmitter.emit("unmuted"):d.$MVideoPlayerApiBase14!==0&&a===0&&d.eventEmitter.emit("muted"),d.eventEmitter.emit("changeVolume",{volume:a}));d.$MVideoPlayerApiBase14=a;if(d.$MVideoPlayerApiBase27){d.$MVideoPlayerApiBase27=!1;return}b("Stratcom").invoke("m:video:player:volumechange",null,{videoElement:d.$MVideoPlayerApiBase1,player:d.getVideoElement()})};d.$MVideoPlayerApiBase48=function(){d.hideLoadingSpinner()};d.$MVideoPlayerApiBase52=function(){!d.$MVideoPlayerApiBase6&&d.getLastActionReason()==="page_visibility_initiated"&&d.play("user_initiated")};d.$MVideoPlayerApiBase53=function(){d.$MVideoPlayerApiBase6&&d.pause("page_visibility_initiated")};d.$MVideoPlayerApiBase49=function(){d.$MVideoPlayerApiBase3.playStartSec&&d.$MVideoPlayerApiBase3.playStartSec>0&&(d.getVideoElement().currentTime=d.$MVideoPlayerApiBase3.playStartSec),d.eventEmitter.emit("updateMetadata")};d.$MVideoPlayerApiBase65=function(){var a=d.$MVideoPlayerApiBase16;d.$MVideoPlayerApiBase68();if(d.$MVideoPlayerApiBase16!==a){d.logEvent("viewability_changed",(a={},a.current_viewability_percentage=d.$MVideoPlayerApiBase16,a))}};d.hideLoadingSpinner=function(){d.toggleClassOnMVideoElement(b("MVideoUtils").LOADING_CLASS,!1)};d.showLoadingSpinner=function(){d.toggleClassOnMVideoElement(b("MVideoUtils").LOADING_CLASS,!0)};d.toggleVideoQuality=function(){};d.getVideoQuality=function(){return d.$MVideoPlayerApiBase3.defaultQuality};d.$MVideoPlayerApiBase72=function(){if(!d.$MVideoPlayerApiBase7||!d.getVideoElement()){d.$MVideoPlayerApiBase64();return}d.logHeartbeat()};d.$MVideoPlayerApiBase1=c;d.$MVideoPlayerApiBase3=b("MVideoUtils").getVideoDataFromMVideo(d.$MVideoPlayerApiBase1);d.$MVideoPlayerApiBase3[b("MVideoUtils").API_INSTANCE_KEY]=babelHelpers.assertThisInitialized(d);d.$MVideoPlayerApiBase23=new(b("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider)();d.$MVideoPlayerApiBase18=b("throttle").withBlocking(d.$MVideoPlayerApiBase33,l,babelHelpers.assertThisInitialized(d));d.$MVideoPlayerApiBase19=b("throttle").withBlocking(d.$MVideoPlayerApiBase34,l,babelHelpers.assertThisInitialized(d));return d}var d=c.prototype;d.setup=function(){};d.init=function(a){var c=this;this.reset();this.$MVideoPlayerApiBase28=!0;a&&(this.$MVideoPlayerApiBase2=a);this.$MVideoPlayerApiBase35(i.CONSTRUCTED);this.$MVideoPlayerApiBase3.videoInitSeqID===null||this.$MVideoPlayerApiBase3.videoInitSeqID===void 0?this.$MVideoPlayerApiBase3.videoInitSeqID=0:this.$MVideoPlayerApiBase3.videoInitSeqID=1+this.$MVideoPlayerApiBase3.videoInitSeqID;this.$MVideoPlayerApiBase4=new(b("SubscriptionsHandler"))();this.prepareDOMNode();j.forEach(function(a){b("StratcomManager").enableDispatch(c.getVideoElement(),a)});this.$MVideoPlayerApiBase36();this.$MVideoPlayerApiBase3&&(this.setAudioOnly&&this.setAudioOnly(!!this.$MVideoPlayerApiBase3.audioOnly));this.$MVideoPlayerApiBase37(a);this.$MVideoPlayerApiBase22=!0;this.$MVideoPlayerApiBase38();this.$MVideoPlayerApiBase3.videoDebuggerEnabled&&(this.$MVideoPlayerApiBase10=new(b("MInlineVideoDebugger"))(this.$MVideoPlayerApiBase1,this.$MVideoPlayerApiBase3),this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(this.getLastActionReason()));this.$MVideoPlayerApiBase15=b("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3);this.$MVideoPlayerApiBase3.loop&&this.$MVideoPlayerApiBase3.numOfLoops===null&&(this.getVideoElement().setAttribute("loop","true"),this.getVideoElement().loop=!0);b("Stratcom").invoke("m:video:player:init",null,{apiInstance:this});this.$MVideoPlayerApiBase35(i.INIT_DONE);this.postInit();this.$MVideoPlayerApiBase35(i.CREATED)};d.$MVideoPlayerApiBase36=function(){this.initLogger();var a=b("MParent").bySigil(this.$MVideoPlayerApiBase1,"story-div");if(a){a=b("DataAttributeUtils").getDataFt(a);a={ft:JSON.parse(a)};this.getLogger().setFTData(a)}this.$MVideoPlayerApiBase31=0;this.$MVideoPlayerApiBase32=0};d.$MVideoPlayerApiBase39=function(){var a;this.$MVideoPlayerApiBase3.videoElement?this.$MVideoPlayerApiBase3.videoElement:(this.$MVideoPlayerApiBase35("create_new_video_node"),a=b("MVideoUtils").createVideoNode(),this.$MVideoPlayerApiBase3.videoElement=a)};d.$MVideoPlayerApiBase40=function(a){return this.$MVideoPlayerApiBase21.has(a)};d.$MVideoPlayerApiBase41=function(a){this.$MVideoPlayerApiBase35(a,!0)};d.$MVideoPlayerApiBase35=function(a,c){c===void 0&&(c=!1);if(!b("MVideoExperiments").mtouch_enable_playback_funnel_counters)return;var d=this.getPlayerVersion();if(c&&this.$MVideoPlayerApiBase40(a))return;this.$MVideoPlayerApiBase21.add(a);b("ODS").bumpEntityKey(2966,"mtouch_video."+d+"."+this.$MVideoPlayerApiBase2,a)};d.reset=function(){this.$MVideoPlayerApiBase28&&g(0,5251),this.$MVideoPlayerApiBase2="user_initiated",this.$MVideoPlayerApiBase5=!0,this.$MVideoPlayerApiBase6=!1,this.$MVideoPlayerApiBase7=!1,this.$MVideoPlayerApiBase8=!1,this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase10=null,this.$MVideoPlayerApiBase11="user_initiated",this.$MVideoPlayerApiBase12=void 0,this.$MVideoPlayerApiBase15=!1,this.$MVideoPlayerApiBase16=void 0,this.$MVideoPlayerApiBase17=void 0,this.$MVideoPlayerApiBase20=void 0,this.$MVideoPlayerApiBase21=new Set([]),this.$MVideoPlayerApiBase22=!1,this.$MVideoPlayerApiBase24=void 0,this.$MVideoPlayerApiBase25=void 0,this.$MVideoPlayerApiBase26=void 0,this.$MVideoPlayerApiBase27=!1,this.$MVideoPlayerApiBase29=0,this.$MVideoPlayerApiBase30=!1};d.postInit=function(){};d.prepareDOMNode=function(){this.$MVideoPlayerApiBase3.videoElement&&this.$MVideoPlayerApiBase35("consume_precreated_video_node");this.$MVideoPlayerApiBase39();var a=this.getVideoElement();a.controls=!(b("MVideoExperiments").enableSphericalVideo&&this.$MVideoPlayerApiBase3.spherical)&&!this.$MVideoPlayerApiBase3.disableVideoControls;b("DOM").prependContent(this.$MVideoPlayerApiBase1,a);a.setAttribute("playInFullScreen",this.$MVideoPlayerApiBase3.playInFullScreen);!this.$MVideoPlayerApiBase3.playInFullScreen&&this.$MVideoPlayerApiBase3.shouldPlayInline&&a.setAttribute("playsinline","true");this.$MVideoPlayerApiBase3.muted&&(a.muted=!0,this.shouldIgnoreInitialMuteOperation()&&(this.$MVideoPlayerApiBase27=!0))};d.$MVideoPlayerApiBase38=function(){var a=this,c;this.$MVideoPlayerApiBase4.addSubscriptions(b("Stratcom").listen("m:page:unload",null,function(){a.release(),b("Stratcom").removeCurrentListener()}));var d=this.getVideoElement();this.$MVideoPlayerApiBase4.addSubscriptions((c=b("EventListener")).listen(d,"play",this.$MVideoPlayerApiBase42),c.listen(d,"playing",this.$MVideoPlayerApiBase43),c.listen(d,"pause",function(){return a.$MVideoPlayerApiBase44(!0)}),c.listen(d,"ended",this.$MVideoPlayerApiBase45),c.listen(d,"waiting",this.$MVideoPlayerApiBase46),c.listen(d,"timeupdate",this.onTimeUpdateBase.bind(this)),c.listen(d,"volumechange",this.$MVideoPlayerApiBase47),c.listen(d,"canplay",this.$MVideoPlayerApiBase48),c.listen(d,"loadedmetadata",this.$MVideoPlayerApiBase49),c.listen(this.getVideoElement(),"contextmenu",function(a){a.preventDefault()}));b("MVideoExperiments").use_shared_seeking||this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(d,"seeked",this.$MVideoPlayerApiBase50),b("EventListener").listen(d,"seeking",this.$MVideoPlayerApiBase51));this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(window,"focus",this.$MVideoPlayerApiBase52),b("EventListener").listen(window,"blur",this.$MVideoPlayerApiBase53));b("MFullScreen").isSupported()&&this.$MVideoPlayerApiBase4.addSubscriptions(b("MFullScreen").listenForFullScreenEvent(window,this.$MVideoPlayerApiBase54));b("MVideoExperiments").listen_readystate_to_play&&this.$MVideoPlayerApiBase4.addSubscriptions(b("EventListener").listen(d,"loadeddata",this.$MVideoPlayerApiBase55))};d.$MVideoPlayerApiBase60=function(){this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)?this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)||this.$MVideoPlayerApiBase41(i.CANCELLED_REQUEST_PLAYING):this.$MVideoPlayerApiBase35(i.PAUSE_WITHOUT_PLAY),this.$MVideoPlayerApiBase35(i.PAUSED)};d.$MVideoPlayerApiBase57=function(){this.$MVideoPlayerApiBase15&&(this.$MVideoPlayerApiBase17=b("setInterval")(this.$MVideoPlayerApiBase65,this.$MVideoPlayerApiBase3.videoViewabilityLoggingPollingRate))};d.$MVideoPlayerApiBase63=function(){b("clearInterval")(this.$MVideoPlayerApiBase17)};d.onTimeUpdateBase=function(a){this.$MVideoPlayerApiBase8&&this.$MVideoPlayerApiBase9&&(this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase66()),this.$MVideoPlayerApiBase18(),this.$MVideoPlayerApiBase19(),this.eventEmitter.emit("updateStatus",{position:this.getCurrentTimePosition()})};d.$MVideoPlayerApiBase66=function(){this.logEvent("requested_playing",{debug_reason:"seek_initiated"}),this.onPlaying(),this.$MVideoPlayerApiBase58(),this.$MVideoPlayerApiBase8=!1};d.$MVideoPlayerApiBase58=function(){b("qex")._("773042")&&this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PLAYING_CLASS,!0),this.$MVideoPlayerApiBase7=!0};d.$MVideoPlayerApiBase62=function(){b("qex")._("773042")&&this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PLAYING_CLASS,!1),this.$MVideoPlayerApiBase7=!1};d.$MVideoPlayerApiBase67=function(){this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateViewabilityLoggingDebugger(this.$MVideoPlayerApiBase16)};d.$MVideoPlayerApiBase68=function(){var a=b("MVideoViewability").calculateViewabilityPercentage(this.$MVideoPlayerApiBase1);this.$MVideoPlayerApiBase16!==a&&(this.$MVideoPlayerApiBase16=a,this.$MVideoPlayerApiBase67())};d.$MVideoPlayerApiBase33=function(){this.$MVideoPlayerApiBase3.playEndSec&&this.getVideoElement().currentTime>this.$MVideoPlayerApiBase3.playEndSec&&!this.$MVideoPlayerApiBase3.loop&&this.pause()};d.$MVideoPlayerApiBase34=function(){if(this.$MVideoPlayerApiBase3.loop&&(this.$MVideoPlayerApiBase3.playStartSec||this.$MVideoPlayerApiBase3.playEndSec)&&(this.$MVideoPlayerApiBase3.playEndSec&&this.getVideoElement().currentTime>this.$MVideoPlayerApiBase3.playEndSec||this.$MVideoPlayerApiBase3.playStartSec&&this.getVideoElement().currentTime==0)){var a=this.$MVideoPlayerApiBase3.playStartSec||0;this.getVideoElement().currentTime=a}};d.isVisible=function(){return this.$MVideoPlayerApiBase5};d.show=function(a){a===void 0&&(a=!0),this.$MVideoPlayerApiBase5=!0,b("CSS").conditionClass(this.$MVideoPlayerApiBase1,b("MVideoUtils").SHOWN_CLASS,!0),this.$MVideoPlayerApiBase69(),a&&this.$MVideoPlayerApiBase70()};d.hide=function(){this.$MVideoPlayerApiBase5=!1,b("CSS").conditionClass(this.$MVideoPlayerApiBase1,b("MVideoUtils").SHOWN_CLASS,!1)};d.$MVideoPlayerApiBase37=function(a){this.$MVideoPlayerApiBase41(i.FIRST_REQUESTED_PLAYING),this.$MVideoPlayerApiBase35(i.REQUESTED_PLAYING),this.logEvent("requested_playing",null),this.$MVideoPlayerApiBase24||(this.$MVideoPlayerApiBase24=this.$MVideoPlayerApiBase23.getOperationLogger("requested_playing").start().setInitiator(a))};d.shouldDisablePlayDelay=function(){return!1};d.shouldIgnoreInitialMuteOperation=function(){return!1};d.play=function(a){var c=this;if(b("MVideoExperiments").mtouch_prevent_consequent_calls&&this.$MVideoPlayerApiBase6)return;this.$MVideoPlayerApiBase3&&(this.setAudioOnly&&this.setAudioOnly(!!this.$MVideoPlayerApiBase3.audioOnly));a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase22?this.$MVideoPlayerApiBase22=!1:this.$MVideoPlayerApiBase37(a);this.$MVideoPlayerApiBase61(!0);b("MVideoExperiments").set_pending_play_request&&this.__setPendingPlayRequest(!0);if(b("MVideoExperiments").isKaiOS||this.shouldDisablePlayDelay())this.$MVideoPlayerApiBase56();else{if(b("MVideoExperiments").wait_timeout_to_play){if(this.$MVideoPlayerApiBase12)return;this.$MVideoPlayerApiBase12=b("setTimeoutAcrossTransitions")(function(){c.$MVideoPlayerApiBase56()},k)}b("MVideoExperiments").listen_readystate_to_play&&(this.$MVideoPlayerApiBase13=!0,this.$MVideoPlayerApiBase55())}};d.$MVideoPlayerApiBase56=function(){this.$MVideoPlayerApiBase13=!1,this.$MVideoPlayerApiBase12&&window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null,this.$MVideoPlayerApiBase41(i.FIRST_VIDEO_PLAY),this.$MVideoPlayerApiBase35(i.VIDEO_PLAY),this.attemptVideoElementPlay()};d.attemptVideoElementPlay=function(){var a=this,b=this.getVideoElement().play();b&&b["catch"](function(b){b&&b.name==="NotAllowedError"&&a.logEvent("cancelled_requested_playing",{reason:"not_allowed"})})};d.pause=function(a){if(b("MVideoExperiments").mtouch_prevent_consequent_calls&&!this.$MVideoPlayerApiBase6)return;this.$MVideoPlayerApiBase25=this.$MVideoPlayerApiBase23.getOperationLogger("pause").start().setInitiator(a);this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)&&this.$MVideoPlayerApiBase41(i.REQUESTED_PAUSE_BEFORE_STARTED_PLAYING);this.$MVideoPlayerApiBase35(i.REQUESTED_PAUSE);a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase61(!1);this.getVideoElement().pause();this.$MVideoPlayerApiBase12&&(window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null);this.toggleClassOnMVideoElement(b("MVideoUtils").SHOW_PAUSE_CLASS,!0)};d.unload=function(){this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)&&this.$MVideoPlayerApiBase35(i.DESTROYED_REQUESTED_PLAYING);this.$MVideoPlayerApiBase44(!0);this.logPauseEvent();this.$MVideoPlayerApiBase71();this.pause("unloaded");b("Stratcom").invoke("m:video:player:destroy",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.getVideoElement()});var a=this.getVideoElement();this.$MVideoPlayerApiBase3.videoElement=null;this.$MVideoPlayerApiBase10&&(this.$MVideoPlayerApiBase10.cleanUp(),this.$MVideoPlayerApiBase10=null);this.$MVideoPlayerApiBase20&&(this.$MVideoPlayerApiBase20.unload(),this.$MVideoPlayerApiBase20=null);this.release();this.hide();a&&(a.setAttribute("src",""),a.load&&a.load());a=null;this.$MVideoPlayerApiBase35(i.DESTROY);this.$MVideoPlayerApiBase23.deactivate();this.$MVideoPlayerApiBase28=!1};d.destroy=function(){this.unload(),delete this.$MVideoPlayerApiBase3[b("MVideoUtils").API_INSTANCE_KEY]};d.$MVideoPlayerApiBase71=function(){b("DOM").remove(this.getVideoElement());while(this.getVideoElement().hasChildNodes())this.getVideoElement().removeChild(this.getVideoElement().lastChild);this.getVideoElement().removeAttribute("src")};d.release=function(){this.$MVideoPlayerApiBase4.release(),b("clearInterval")(this.$MVideoPlayerApiBase17)};d.getVolume=function(){return this.getVideoElement().volume};d.setVolume=function(a){this.getVideoElement().volume=a};d.mute=function(){this.getVideoElement().muted=!0};d.unmute=function(){this.getVideoElement().muted=!1};d.seek=function(a){this.getVideoElement().currentTime=a};d.getPlaybackDuration=function(){return this.getVideoElement().duration||0};d.getCurrentTimePosition=function(){return this.getVideoElement().currentTime||0};d.getPreInitLoggerProvider=function(){return this.$MVideoPlayerApiBase23};d.$MVideoPlayerApiBase69=function(){this.$MVideoPlayerApiBase3.width&&this.getVideoElement().setAttribute("width",this.$MVideoPlayerApiBase3.width),this.$MVideoPlayerApiBase3.height&&this.getVideoElement().setAttribute("height",this.$MVideoPlayerApiBase3.height)};d.getDimensions=function(){var a=this.getVideoElement();return{width:Number(this.$MVideoPlayerApiBase3.width||a.width),height:Number(this.$MVideoPlayerApiBase3.height||a.height)}};d.$MVideoPlayerApiBase70=function(){if(!b("isCdnURI")(new(h||(h=b("URI")))(this.$MVideoPlayerApiBase3.subtitlesSrc)))return;var a=new(b("MVideoSubtitles"))(this.getVideoElement());a.setOnSubtitlesReady(function(){return a.showSubtitles()});a.loadSubtitles(this.$MVideoPlayerApiBase3.subtitlesSrc)};d.toggleClassOnMVideoElement=function(a,c){b("CSS").conditionClass(this.$MVideoPlayerApiBase1,a,c)};d.hasActivePlayer=function(){return this.$MVideoPlayerApiBase5&&this.getVideoElement().parentNode===this.$MVideoPlayerApiBase1};d.getVideoData=function(){return this.$MVideoPlayerApiBase3};d.getMVideoElement=function(){return this.$MVideoPlayerApiBase1};d.$MVideoPlayerApiBase61=function(a){this.$MVideoPlayerApiBase6=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updatePlayerStateDebugger(this.$MVideoPlayerApiBase6?b("MVideoUtils").PLAYER_STATE.playing:b("MVideoUtils").PLAYER_STATE.paused)};d.isPlayingState=function(){return this.isPlayScheduled()||this.isCurrentlyPlaying()};d.isPlayScheduled=function(){return this.$MVideoPlayerApiBase6};d.isCurrentlyPlaying=function(){return this.$MVideoPlayerApiBase7};d.setPlayerState=function(a){this.$MVideoPlayerApiBase61(a===b("MVideoUtils").PLAYER_STATE.playing)};d.setLastActionReason=function(a){this.$MVideoPlayerApiBase11=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(a)};d.getLastActionReason=function(){return this.$MVideoPlayerApiBase11};d.getPlayerFormat=function(){return this.$MVideoPlayerApiBase3.playerFormat};d.getPlayerOrigin=function(){return this.$MVideoPlayerApiBase3.playerOrigin};d.getPlayerSuborigin=function(){return this.$MVideoPlayerApiBase3.playerSuborigin};d.getSubscriptions=function(){return this.$MVideoPlayerApiBase4};d.getVideoElement=function(){this.$MVideoPlayerApiBase3.videoElement||this.$MVideoPlayerApiBase39();return this.$MVideoPlayerApiBase3.videoElement};d.getVideoID=function(){return this.$MVideoPlayerApiBase3.videoID};d.getSavedOffline=function(){return b("MVideoCache").isVideoDownloaded(this.$MVideoPlayerApiBase3.videoID)};d.getConnectivityType=function(){return b("MVideoNetworkUtils").getConnectivityType()};d.getLastPlayReason=function(){return this.getLastActionReason()};d.getVideoPlayReason=function(){return this.$MVideoPlayerApiBase2};d.getResourceUrl=function(){return b("MVideoExperiments").shouldLogResourceUrl?this.$MVideoPlayerApiBase3.src:null};d.getIsAdsPreview=function(){return!!this.$MVideoPlayerApiBase3.isAdsPreview};d.getAdditionalLogData=function(a){var c;c=(c={},c.video_quality=this.getVideoQuality(),c.streaming_format=this.getStreamingFormat(),c.player_version=this.getPlayerVersion(),c.video_init_seq_id=this.getVideoData().videoInitSeqID,c.external_log_id=this.$MVideoPlayerApiBase3.external_log_id,c.external_log_type=this.$MVideoPlayerApiBase3.external_log_type,c.event_seq_num=++this.$MVideoPlayerApiBase31,c.seq_num=b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames.indexOf(a)>=0?++this.$MVideoPlayerApiBase32:null,c);this.$MVideoPlayerApiBase3.iframeEmbedReferrer&&(c.iframe_embed_referrer=this.$MVideoPlayerApiBase3.iframeEmbedReferrer);this.$MVideoPlayerApiBase3.permalinkShareID&&(c.permalink_share_id=this.$MVideoPlayerApiBase3.permalinkShareID);this.$MVideoPlayerApiBase3.feedPosition!=null&&(c.feed_position=this.$MVideoPlayerApiBase3.feedPosition);this.$MVideoPlayerApiBase3.chainDepth!=null&&(c.video_chaining_depth_level=this.$MVideoPlayerApiBase3.chainDepth);var d=this.$MVideoPlayerApiBase2;d&&a!=="displayed"&&(c.video_play_reason=d);b("VideoViewabilityKeyEvents").Events.includes(a)&&b("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3)&&(this.$MVideoPlayerApiBase68(),c.current_viewability_percentage=this.$MVideoPlayerApiBase16);return c};d.getPlayerVersion=function(){return"html5"};d.getStreamingFormat=function(){return"progressive"};d.getEmbeddedVideoControlsConfig=function(){return null};d.getEmbeddedVideoControls=function(){return this.$MVideoPlayerApiBase20};d.getIsInMWERedesign=function(){return this.getPlayerOrigin()==="external"&&b("MVideoExperiments").mwe_overlay_redesign_enabled};d.setupControls=function(){var a=this,c=this.getEmbeddedVideoControlsConfig();return!c?b("Promise").resolve():new(b("Promise"))(function(d){var e={toggleQuality:a.toggleVideoQuality,getCurrentVideoQuality:a.getVideoQuality};a.$MVideoPlayerApiBase4.addSubscriptions(b("Bootloader").loadModules(["MEmbeddedVideoControls"],function(b){a.$MVideoPlayerApiBase20=new b(a,a.getVideoElement(),a.getMVideoElement(),e,c),d()},"MVideoPlayerApiBase"))})};d.$MVideoPlayerApiBase59=function(){if(this.$MVideoPlayerApiBase26)return;this.$MVideoPlayerApiBase26=b("setInterval")(this.$MVideoPlayerApiBase72,m)};d.$MVideoPlayerApiBase64=function(){b("clearInterval")(this.$MVideoPlayerApiBase26),this.$MVideoPlayerApiBase26=null};d.heartbeatEnabled=function(){return!1};d.isInitialized=function(){return this.$MVideoPlayerApiBase28};d.handleFullScreenBehaviour=function(a,b){if(this.$MVideoPlayerApiBase2!="autoplay_initiated"||!a||!b.muted||this.$MVideoPlayerApiBase30)return;this.logEvent("muted");this.$MVideoPlayerApiBase30=!0};d.shouldAllowAudioOnlyToggle=function(){var a=this.getVideoData();if(!a)return!1;if(!a.playbackIsLiveStreaming)return!1;return this.getPlayerOrigin()==="external"?!1:!!a.audioOnlyEnabled};return c}(b("mixin")(b("HVideoPlayerLoggerMixin")));c=a;e.exports=c}),null);
__d("VideoPlayerShakaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAccessToken=function(a){this.$1.access_token=a;return this};c.setAdditionalBufferedRanges=function(a){this.$1.additional_buffered_ranges=a;return this};c.setAppendedBufferMs=function(a){this.$1.appended_buffer_ms=a;return this};c.setBandwidthEstimate=function(a){this.$1.bandwidth_estimate=a;return this};c.setClientTimeBegin=function(a){this.$1.client_time_begin=a;return this};c.setClientTimeEnd=function(a){this.$1.client_time_end=a;return this};c.setCode=function(a){this.$1.code=a;return this};c.setConcluder=function(a){this.$1.concluder=a;return this};c.setConnectionQualityLevel=function(a){this.$1.connection_quality_level=a;return this};c.setContentLengthHeader=function(a){this.$1.content_length_header=a;return this};c.setDevicePixelRatioFloat=function(a){this.$1.device_pixel_ratio_float=a;return this};c.setDroppedFrames=function(a){this.$1.dropped_frames=a;return this};c.setDynamicBitrate=function(a){this.$1.dynamic_bitrate=a;return this};c.setEdgeHitHeader=function(a){this.$1.edge_hit_header=a;return this};c.setEnded=function(a){this.$1.ended=a;return this};c.setError=function(a){this.$1.error=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExpectedLength=function(a){this.$1.expected_length=a;return this};c.setFblsToPlyDisMs=function(a){this.$1.fbls_to_ply_dis_ms=a;return this};c.setInitiator=function(a){this.$1.initiator=a;return this};c.setIsDrm=function(a){this.$1.is_drm=a;return this};c.setIsLive=function(a){this.$1.is_live=a;return this};c.setIsMuted=function(a){this.$1.is_muted=a;return this};c.setIsPageVisible=function(a){this.$1.is_page_visible=a;return this};c.setIsServableViaFbms=function(a){this.$1.is_servable_via_fbms=a;return this};c.setIsTemplatedManifest=function(a){this.$1.is_templated_manifest=a;return this};c.setLastBufferedEnd=function(a){this.$1.last_buffered_end=a;return this};c.setLastBufferedStart=function(a){this.$1.last_buffered_start=a;return this};c.setLastBufferingEventEndTime=function(a){this.$1.last_buffering_event_end_time=a;return this};c.setLastPlayingEventTime=function(a){this.$1.last_playing_event_time=a;return this};c.setLength=function(a){this.$1.length=a;return this};c.setLiveheadDelta=function(a){this.$1.livehead_delta=a;return this};c.setLiveheadSeqNumHeader=function(a){this.$1.livehead_seq_num_header=a;return this};c.setLiveheadSeqNumMpd=function(a){this.$1.livehead_seq_num_mpd=a;return this};c.setLogicalCpuCount=function(a){this.$1.logical_cpu_count=a;return this};c.setLowestQualityRepresentationID=function(a){this.$1.lowest_quality_representation_id=a;return this};c.setManifestType=function(a){this.$1.manifest_type=a;return this};c.setMediastreamEventCount=function(a){this.$1.mediastream_event_count=a;return this};c.setOriginHitHeader=function(a){this.$1.origin_hit_header=a;return this};c.setParentID=function(a){this.$1.parent_id=a;return this};c.setPlayerInstanceCount=function(a){this.$1.player_instance_count=a;return this};c.setPlayerOriginCallerSpecified=function(a){this.$1.player_origin_caller_specified=a;return this};c.setPlayerSuborigin=function(a){this.$1.player_suborigin=a;return this};c.setPlayerVersion=function(a){this.$1.player_version=a;return this};c.setPlayhead=function(a){this.$1.playhead=a;return this};c.setPreloadTime=function(a){this.$1.preload_time=a;return this};c.setPreviousRepresentationID=function(a){this.$1.previous_representation_id=a;return this};c.setPriorityFloat=function(a){this.$1.priority_float=a;return this};c.setPushed=function(a){this.$1.pushed=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setRepresentationID=function(a){this.$1.representation_id=a;return this};c.setRescheduleCount=function(a){this.$1.reschedule_count=a;return this};c.setResource=function(a){this.$1.resource=a;return this};c.setResponseTimeMsHeader=function(a){this.$1.response_time_ms_header=a;return this};c.setResult=function(a){this.$1.result=a;return this};c.setScriptPath=function(a){this.$1.script_path=a;return this};c.setSegmentCount=function(a){this.$1.segment_count=a;return this};c.setSegmentEndTime=function(a){this.$1.segment_end_time=a;return this};c.setSegmentStartTime=function(a){this.$1.segment_start_time=a;return this};c.setSegmentTimeGap=function(a){this.$1.segment_time_gap=a;return this};c.setSequentialID=function(a){this.$1.sequential_id=a;return this};c.setSession=function(a){this.$1.session=a;return this};c.setState=function(a){this.$1.state=a;return this};c.setStreamSwitchReason=function(a){this.$1.stream_switch_reason=a;return this};c.setTimeBetweenBytesMax=function(a){this.$1.time_between_bytes_max=a;return this};c.setTimeSinceMainThreadAvailable=function(a){this.$1.time_since_main_thread_available=a;return this};c.setTimeToFirstByte=function(a){this.$1.time_to_first_byte=a;return this};c.setTimeToLastByte=function(a){this.$1.time_to_last_byte=a;return this};c.setTimeToRequestSent=function(a){this.$1.time_to_request_sent=a;return this};c.setTimeToRequestStart=function(a){this.$1.time_to_request_start=a;return this};c.setTotalFrames=function(a){this.$1.total_frames=a;return this};c.setType=function(a){this.$1.type=a;return this};c.setUpdatePeriod=function(a){this.$1.update_period=a;return this};c.setVideoDuration=function(a){this.$1.video_duration=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVideoPlaybackExperienceIssue=function(a){this.$1.video_playback_experience_issue=a;return this};c.setWasDelayed=function(a){this.$1.was_delayed=a;return this};return a}();c={access_token:!0,additional_buffered_ranges:!0,appended_buffer_ms:!0,bandwidth_estimate:!0,client_time_begin:!0,client_time_end:!0,code:!0,concluder:!0,connection_quality_level:!0,content_length_header:!0,device_pixel_ratio_float:!0,dropped_frames:!0,dynamic_bitrate:!0,edge_hit_header:!0,ended:!0,error:!0,event:!0,expected_length:!0,fbls_to_ply_dis_ms:!0,initiator:!0,is_drm:!0,is_live:!0,is_muted:!0,is_page_visible:!0,is_servable_via_fbms:!0,is_templated_manifest:!0,last_buffered_end:!0,last_buffered_start:!0,last_buffering_event_end_time:!0,last_playing_event_time:!0,length:!0,livehead_delta:!0,livehead_seq_num_header:!0,livehead_seq_num_mpd:!0,logical_cpu_count:!0,lowest_quality_representation_id:!0,manifest_type:!0,mediastream_event_count:!0,origin_hit_header:!0,parent_id:!0,player_instance_count:!0,player_origin_caller_specified:!0,player_suborigin:!0,player_version:!0,playhead:!0,preload_time:!0,previous_representation_id:!0,priority_float:!0,pushed:!0,reason:!0,representation_id:!0,reschedule_count:!0,resource:!0,response_time_ms_header:!0,result:!0,script_path:!0,segment_count:!0,segment_end_time:!0,segment_start_time:!0,segment_time_gap:!0,sequential_id:!0,session:!0,state:!0,stream_switch_reason:!0,time_between_bytes_max:!0,time_since_main_thread_available:!0,time_to_first_byte:!0,time_to_last_byte:!0,time_to_request_sent:!0,time_to_request_start:!0,total_frames:!0,type:!0,update_period:!0,video_duration:!0,video_id:!0,video_playback_experience_issue:!0,was_delayed:!0};e.exports=a}),null);
__d("MVideoPlayerOzEventOperationLogger",["VideoPlayerShakaPerformanceTypedLogger"],(function(a,b,c,d,e,f){"use strict";function g(a){typeof a==="number"&&(a=Math.floor(a));return a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.setState=function(b){this.$MVideoPlayerOzEventOperationLogger1=b;return a.prototype.setState.call(this,b)};c.getState=function(){return this.$MVideoPlayerOzEventOperationLogger1};c.setSequentialID=function(b){this.$MVideoPlayerOzEventOperationLogger2=b;a.prototype.setSequentialID.call(this,b);return this};c.setParentLogger=function(a){this.setParentID(a.$MVideoPlayerOzEventOperationLogger2);return this};c.setSegmentEndTime=function(b){a.prototype.setSegmentEndTime.call(this,g(b));return this};c.setSegmentTimeGap=function(b){a.prototype.setSegmentTimeGap.call(this,g(b));return this};c.setSegmentStartTime=function(b){a.prototype.setSegmentStartTime.call(this,g(b));return this};return b}(b("VideoPlayerShakaPerformanceTypedLogger"));e.exports=a}),null);
__d("MVideoPlayerOzPerfLoggerProvider",["MVideoPlayerOzEventOperationLogger","ScriptPath","VideoPlayerShakaPerformanceLoggerConfig","moz-player/loggings/OzPerfLoggerProviderBase","moz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);c.isEnabled=function(){return b("VideoPlayerShakaPerformanceLoggerConfig").isSampled};function c(b){var c;c=a.call(this)||this;c.$MVideoPlayerOzPerfLoggerProvider18=b;c.$MVideoPlayerOzPerfLoggerProvider2=b.videoID;c.$MVideoPlayerOzPerfLoggerProvider4=b.video;c.$MVideoPlayerOzPerfLoggerProvider1=b.uniqueID;c.$MVideoPlayerOzPerfLoggerProvider3=0;c.$MVideoPlayerOzPerfLoggerProvider9=b.isLive;c.$MVideoPlayerOzPerfLoggerProvider8=null;c.$MVideoPlayerOzPerfLoggerProvider10=b.accessToken;c.$MVideoPlayerOzPerfLoggerProvider11=b.playerOrigin;c.$MVideoPlayerOzPerfLoggerProvider12=b.playerSuborigin;c.$MVideoPlayerOzPerfLoggerProvider17=b.preloadTime;c.setRepresentationID(b.representationId);c.$MVideoPlayerOzPerfLoggerProvider19=b.getBandwidthEstimate;return c}var d=c.prototype;d.createLoggerProvider=function(){return new self(this.$MVideoPlayerOzPerfLoggerProvider18)};d.$MVideoPlayerOzPerfLoggerProvider20=function(a){var b=this.$MVideoPlayerOzPerfLoggerProvider4.buffered;if(b.length>0){var c=b.length-1;a=a.setLastBufferedStart(Math.round(b.start(c)*1e3)).setLastBufferedEnd(Math.round(b.end(c)*1e3))}c=[];for(var d=0;d<b.length-1;d++){var e=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.start(d)*1e3),f=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.end(d)*1e3);c.push([e,f])}c&&c.length&&(a=a.setAdditionalBufferedRanges(JSON.stringify(c)));return a};d.setType=function(a){this.$MVideoPlayerOzPerfLoggerProvider16=a;return this};d.getLiveheadDelta=function(){return this.$MVideoPlayerOzPerfLoggerProvider8?Math.round((this.$MVideoPlayerOzPerfLoggerProvider8-this.$MVideoPlayerOzPerfLoggerProvider4.currentTime)*1e3):null};d.getVideoID=function(){return this.$MVideoPlayerOzPerfLoggerProvider2};d.getEventLogger=function(a){var c=this,d=Date.now(),e=new(b("MVideoPlayerOzEventOperationLogger"))(),f=this.$MVideoPlayerOzPerfLoggerProvider4.currentTime,g=this.$MVideoPlayerOzPerfLoggerProvider4.duration;this.$MVideoPlayerOzPerfLoggerProvider20(e).setEvent(a).setVideoID(this.$MVideoPlayerOzPerfLoggerProvider2).setLogicalCpuCount(navigator&&navigator.hardwareConcurrency).setPlayerOriginCallerSpecified(this.$MVideoPlayerOzPerfLoggerProvider11).setScriptPath(b("ScriptPath").getScriptPath()).setPlayerSuborigin(this.$MVideoPlayerOzPerfLoggerProvider12).setDynamicBitrate(this.$MVideoPlayerOzPerfLoggerProvider15).setRepresentationID(this.getRepresentationID()).setLowestQualityRepresentationID(this.$MVideoPlayerOzPerfLoggerProvider14).setPlayhead(Math.round(f*1e3)).setVideoDuration(Math.round(g*1e3)).setIsLive(this.$MVideoPlayerOzPerfLoggerProvider9).setSession(this.$MVideoPlayerOzPerfLoggerProvider1).setManifestType(this.$MVideoPlayerOzPerfLoggerProvider13).setSequentialID(this.$MVideoPlayerOzPerfLoggerProvider3++).setState(this.$MVideoPlayerOzPerfLoggerProvider5).setLastBufferingEventEndTime(this.$MVideoPlayerOzPerfLoggerProvider7).setLastPlayingEventTime(this.$MVideoPlayerOzPerfLoggerProvider6).setLiveheadDelta(this.getLiveheadDelta()).setPushed(0).setResult("success").setAccessToken(this.$MVideoPlayerOzPerfLoggerProvider10).setClientTimeBegin(d).setClientTimeEnd(d).setPreloadTime(this.$MVideoPlayerOzPerfLoggerProvider17).setBandwidthEstimate(Math.round(this.$MVideoPlayerOzPerfLoggerProvider19()));var h=this,i=e.setState;e.setState=function(a){a!==this.$MVideoPlayerOzPerfLoggerProvider5&&a==="playing"?h.$MVideoPlayerOzPerfLoggerProvider6=Date.now():a!=="playing"&&(h.$MVideoPlayerOzPerfLoggerProvider6=null);h.$MVideoPlayerOzPerfLoggerProvider5=a;return i.call(this,a)};e.updateState=function(a){return this.getState()==h.$MVideoPlayerOzPerfLoggerProvider5?this.setState(a):this};var j=e.setError;e.setError=function(a){typeof a==="object"?(a.type==="aborted"||a.type==="delay"?this.setResult("aborted"):a.type==="paused"?this.setResult("paused"):(this.setResult("failed"),j.call(this,a.type)),a instanceof b("moz-player/utils/OzError")?this.setCode(a.getExtra().code):this.setCode(a.status),this.setError(a.name)):j.call(this,a);return this};var k=e.setManifestType;e.setManifestType=function(a){c.$MVideoPlayerOzPerfLoggerProvider13=a;return k.call(e,a)};return e};d.getOperationLogger=function(a){a=this.createOperationLogger(a);this.setOperationContext(a);return a};d.createOperationLogger=function(a){var b=this,c=this.getEventLogger(a),d=c.log,e=this;c.log=function(){var b=this.getData().client_time_end||Date.now();this.setClientTimeEnd(b);a==="buffering"&&(e.$MVideoPlayerOzPerfLoggerProvider7=Date.now());return d.call(this)};c.start=function(){return c};c.setLiveheadPosition=function(a){b.$MVideoPlayerOzPerfLoggerProvider8=a;c.setLiveheadDelta(b.getLiveheadDelta());return c};var f=c.setDynamicBitrate;c.setDynamicBitrate=function(a){a=Number(a)||null;b.$MVideoPlayerOzPerfLoggerProvider15=a;return f.call(c,a)};var g=c.setLowestQualityRepresentationID;c.setLowestQualityRepresentationID=function(a){b.$MVideoPlayerOzPerfLoggerProvider14=a;return g.call(c,a)};return c};d.setDynamicBitrate=function(a){this.$MVideoPlayerOzPerfLoggerProvider15=a};return c}(b("moz-player/loggings/OzPerfLoggerProviderBase"));e.exports=a}),null);
__d("MOzLiveVideoPlayerApi",["MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","ODS","guid","promiseDone","requireWeak"],(function(a,b,c,d,e,f){var g=null;a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$MOzLiveVideoPlayerApi1=!1;b.$MOzLiveVideoPlayerApi2=!1;return b}var d=c.prototype;d.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return Object.assign({},b,c)};d.heartbeatEnabled=function(){return!0};d.postInit=function(){var a=this;b("requireWeak")("MOzLivePlayer",function(c){var d=[],e=a.$MOzLiveVideoPlayerApi3();e&&d.push(e);e=a.getVideoData();var f=!1;e&&(f=!!e.audioOnly);c.createPlayer(a.getVideoElement(),a.getVideoData().src,{perfLoggerProviders:d,observedOperationLoggers:[a.getPreInitLoggerProvider()]},{audioOnly:f}).getPromise().then(function(b){g=b,a.$MOzLiveVideoPlayerApi2=!0,a.$MOzLiveVideoPlayerApi1&&(a.getVideoElement().play(),a.$MOzLiveVideoPlayerApi1=!1)})["catch"](function(a){b("ODS").bumpEntityKey(2966,"MOzLivePlayer","createPlayer.error")});a.getVideoElement().controls=!1;b("promiseDone")(a.setupControls())})};d.attemptVideoElementPlay=function(){this.$MOzLiveVideoPlayerApi2?a.prototype.attemptVideoElementPlay.call(this):this.$MOzLiveVideoPlayerApi1=!0};d.unload=function(){g&&g.destroy(),g=null,a.prototype.unload.call(this)};d.getEmbeddedVideoControlsConfig=function(){var a=this.getIsInMWERedesign();return{playbackControlHidden:!1,scrubberHidden:!0,playbackTimerHidden:!0,fullScreenControlHidden:!1,allowAudioOnly:this.shouldAllowAudioOnlyToggle(),displayPermalinkButton:a}};d.getPlayerVersion=function(){return"mtouch_shaka_live"};d.getStreamingFormat=function(){return"dash"};d.$MOzLiveVideoPlayerApi3=function(){return!b("MVideoPlayerOzPerfLoggerProvider").isEnabled()?null:new(b("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!0,video:this.getVideoElement(),uniqueID:b("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:null,getBandwidthEstimate:function(){return 0}})};return c}(b("MVideoPlayerApiBase"));e.exports=a}),null);
__d("moz-player/configs/DummyOzConfig",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getNumber=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getString=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};return a}();e.exports=a}),null);
__d("moz-player/utils/convertPrefetchCacheEntryToReadableStream",["moz-player/shims/OzReadableStream","moz-player/utils/maybeConvertReadableStreamToOzReadableStream","moz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=new(b("moz-player/shims/OzReadableStream"))({start:function(c){a.then(function(a){switch(a.initiator){case"XHR_REQUEST":var d=new Uint8Array(a.response);c.enqueue(d);c.close();break;case"FETCH":d=a.response.body;if(d!=null){var e=function a(){f.read().then(function(b){var d=b.done;b=b.value;if(d){c.close();return}c.enqueue(b);a()})["catch"](function(a){c.err(a)})},f=b("moz-player/utils/maybeConvertReadableStreamToOzReadableStream")(d).getReader();e()}else a.response.arrayBuffer().then(function(a){a=new Uint8Array(a);c.enqueue(a);c.close()})["catch"](function(a){c.err(a)});break;default:a.initiator,c.error(new(b("moz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator}))}})["catch"](function(a){c.error(a)})}});return c}}),null);
__d("moz-player/media_source/OzQuickStarter",["moz-player/configs/OzConfigUtils","moz-player/loggings/OzLoggingUtils","moz-player/loggings/OzPreInitLogger","moz-player/shims/OzEventEmitter","moz-player/shims/ozvariant","moz-player/utils/convertPrefetchCacheEntryToReadableStream","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/media_source/MediaSourceManager"],(function(a,b,c,d,e,f){"use strict";var g=.1;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f;e===void 0&&(e=[]);f=a.call(this)||this;f.$OzQuickStarter5=new Map();f.$OzQuickStarter6=[];f.$OzQuickStarter8=new Map();f.$OzQuickStarter9=new Map();f.$OzQuickStarter10=new(b("moz-player/utils/OzErrorEmitter"))(!0);f.$OzQuickStarter13=function(a){a instanceof b("moz-player/utils/OzError")||(a=new(b("moz-player/utils/OzError"))({type:"OZ_QUICKSTARTER",description:a.message,extra:{originalError:a}})),f.$OzQuickStarter10.emitError(a)};f.$OzQuickStarter3=c;f.$OzQuickStarter1=b("moz-player/configs/OzConfigUtils").provideConfigWithDefaults(d);f.$OzQuickStarter7=new(b("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider)();f.$OzQuickStarter7.setInitiator("quick_starter");f.$OzQuickStarter6.push(f.$OzQuickStarter7);f.$OzQuickStarter2=new(b("moz-player/media_source/MediaSourceManager"))(f.$OzQuickStarter3,f.$OzQuickStarter1,f.$OzQuickStarter7);f.$OzQuickStarter4=new Map();e.forEach(function(a){return f.addPrefetchTrack(a)});return f}var d=c.prototype;d.addPrefetchTrack=function(a){var c=this,d=a.mimeCodec,e=this.$OzQuickStarter11(d);if(!e)return;var f=this.$OzQuickStarter11(d),g=this.$OzQuickStarter12(this.$OzQuickStarter7).setType(f),h=this.$OzQuickStarter12(this.$OzQuickStarter7).setType(f+";init");this.$OzQuickStarter5.set(e,a.segmentPromise?1:0);f=this.$OzQuickStarter2.createSourceBufferManager(d).then(function(d){var f=b("moz-player/utils/convertPrefetchCacheEntryToReadableStream")(a.initializationPromise);b("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a.initializationPromise,h,"fetch_stream");d.queueData(f,h)["catch"](c.$OzQuickStarter13);f=a.segmentPromise;if(f){var i=b("moz-player/utils/convertPrefetchCacheEntryToReadableStream")(f);b("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(f,g,"fetch_stream");d.queueData(i,g).then(function(a){c.$OzQuickStarter8.set(e,a.appendedSec),c.$OzQuickStarter1.getBool("call_end_of_stream_in_quick_starter")&&c.$OzQuickStarter8.size===c.$OzQuickStarter4.size&&c.$OzQuickStarter14()&&(c.$OzQuickStarter2.notifyEndOfStream(),c.emit("streamEnd")),c.$OzQuickStarter1.getBool("seek_to_start_quick_starter")&&c.$OzQuickStarter8.size===c.$OzQuickStarter4.size&&c.$OzQuickStarter15()})["catch"](c.$OzQuickStarter13)}return d});this.$OzQuickStarter4.set(e,f);a.representationID&&this.$OzQuickStarter9.set(e,a.representationID)};d.onError=function(a){return this.$OzQuickStarter10.onError(a)};d.$OzQuickStarter15=function(){var a=this.$OzQuickStarter3.buffered.length>0?this.$OzQuickStarter3.buffered.start(0):null;a!==null&&this.$OzQuickStarter3.currentTime<a&&(this.$OzQuickStarter3.currentTime=a+g)};d.$OzQuickStarter14=function(){var a=this;if(Number.isNaN(this.$OzQuickStarter3.duration))return!1;var b=!0;this.$OzQuickStarter8.forEach(function(c){Math.abs(c-a.$OzQuickStarter3.duration)>g&&(b=!1)});return b};d.getSourceBufferManagerPromise=function(a){a=this.$OzQuickStarter11(a);return this.$OzQuickStarter4.get(a)};d.getPrependedSegmentsCount=function(a){var b=this.$OzQuickStarter11(a);if(!b)return 0;b=this.$OzQuickStarter5.get(b)||0;return this.getSourceBufferManagerPromise(a)?b:0};d.getRepresentationId=function(a){a=this.$OzQuickStarter11(a);return!a?null:this.$OzQuickStarter9.get(a)||null};d.getAudioRepresentationIDAtTime=function(a){return this.$OzQuickStarter16("audio",a)};d.getVideoRepresentationIDAtTime=function(a){return this.$OzQuickStarter16("video",a)};d.getVideoNode=function(){return this.$OzQuickStarter3};d.getMediaSourceManager=function(){return this.$OzQuickStarter2};d.getObservedOperationLoggers=function(){return this.$OzQuickStarter6};d.$OzQuickStarter16=function(a,b){var c=this.$OzQuickStarter8.get(a);return c!=null&&b<=c?this.$OzQuickStarter9.get(a):null};d.$OzQuickStarter12=function(a){a=a.cloneContext();a instanceof b("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider||b("moz-player/shims/ozvariant")(0,5677);this.$OzQuickStarter6.push(a);return a};d.$OzQuickStarter11=function(a){return(a.split("/")[0]||"").trim()};return c}(b("moz-player/shims/OzEventEmitter"));e.exports=a}),null);
__d("MMediaFactory",["MOzExperiments","MVideoUtils","moz-player/configs/DummyOzConfig","moz-player/media_source/OzQuickStarter","setImmediate"],(function(a,b,c,d,e,f){"use strict";f.create=j;f.get=a;f.populate=m;f.setPopulate=c;f.setCreate=d;var g=[];f.pool=g;function h(){return window.MediaSource&&window.fetch&&window.ReadableStream}var i=function(){var a=b("MVideoUtils").createVideoNode(),c;h()&&b("MOzExperiments").use_quick_starter&&(c=new(b("moz-player/media_source/OzQuickStarter"))(a,new(b("moz-player/configs/DummyOzConfig"))(),[]));return{node:a,quickStarter:c}};function j(){return i()}var k;function a(){b("MOzExperiments").precreate_cache_size>0&&!k&&(k=b("setImmediate")(m));if(g.length>0)return g.shift();else return j()}var l=function(){k=null;var a=g.length;if(b("MOzExperiments").precreate_cache_size&&a>=b("MOzExperiments").precreate_cache_size)return;a=b("MOzExperiments").precreate_cache_size-a;for(var c=0;c<a;c++)g.push(j())};function m(){l()}function c(a){}function d(a){}}),null);
__d("MOzConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a={abr_use_download_time:!1,append_last_segment_if_beyond_end:!1,allow_queueing_end_of_stream_when_update:!1,back_off_pdash_504_retry:!1,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,call_end_of_stream_in_quick_starter:!1,cancel_tracker_on_append_error:!1,check_buffer_range_once_for_playhead_update:!1,cleanup_video_node_on_destroy:!1,clear_buffer_when_switch_representation_initiator_is_user:!1,convert_dom_exception_to_oz_error:!1,copy_new_manifest:!1,delay_stream_end_for_sourceended:!1,detach_media_source_manager:!1,disable_audio_scheduler:!1,emit_stream_error_event:!1,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_network_manager_error:!1,enable_quickdashv2:!1,estimate_video_bandwidth_only:!1,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_abr_default_representation:!1,fix_quick_starter_overhead:!0,fix_reload_manifest_retry:!1,fix_seek_performance:!1,fix_setup_video_duration_on_representation_switch:!1,fix_source_buffer_error_logging:!1,fix_stream_deferred_cancel:!1,fix_template_duration_artifact_in_manifest:!1,generate_mos_segment_buffer_diff:!1,handle_mpd_retries_outside_oz_mpd_updater:!1,handle_switch_to_unparsed_representation_sidx:!0,ignore_time_to_response_start:!1,lazy_parse_sidx:!1,listen_for_canplay_in_buffering_detector:!1,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!1,live_gracefully_handle_410:!1,live_gracefully_handle_mpd_errors:!1,live_gracefully_handle_no_network:!1,live_no_segment_when_playhead_is_before_first_segment:!1,live_playhead_catch_up:!1,live_query_time_in_range:!1,load_video_node_on_unload:!1,log_appended_secs:!1,maybe_end_stream_if_prepended_segments:!1,mpd_update_cancel_current_request_tracker:!1,no_new_loop_body_promise_when_stream_ongoing:!1,pausable_stream_throws_error_when_aborted:!1,playhead_manager_handle_timerange_update_on_timeupdate:!1,queue_data_with_error_handling:!1,reach_end_only_when_video_ended:!1,remove_src_attr_on_unload:!1,respect_initial_representation_on_setup:!1,retry_fetch_on_prefetch_error:!1,sbm_abort_on_readable_stream_error:!1,sbm_check_source_buffer_ready_state_on_cancel:!1,sbm_recursively_waits_for_update_end:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!1,seek_to_start_quick_starter:!1,set_source_buffer_append_window_end:!1,set_stream_anchor_only_on_done_status:!1,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!1,stable_buffered_timeranges_in_observedsourcebufferstate:!1,stop_manifest_update_when_static:!1,suppress_playing_event_while_buffering:!1,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!1,touch_cb_key:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!1,update_live_video_config_on_representation_switch:!1,update_media_source_duration:!0,use_abr_for_missing_default_representation:!1,use_deferred_streaming_task:!1,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_sc_timebased_segments:!1,use_segment_request_cache:!1,use_stream_end_time_in_segment_locator:!1,pdash_use_pdash_segmentlocator:!1,fix_buffer_ahead_priority_strategy:!1,fix_prepended_segments_tagging:!1,xmlparser_use_domparser:!1,prevent_unnecessary_seek_stream_anchor_reset:!1};f.defaultBools=a;b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:0,appends_per_segment:3,auto_seek_playhead_slack:0,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,buffer_ahead_target:19,byte_count_per_sample:6e4,default_bandwidth_estimate:5e5,download_time_buffer_delta_penalty_factor:0,initial_manifest_request_retry_count:0,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:1,live_numerical_error_epsilon:0,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,max_bandwidth_sample_count:30,max_start_eme_attempts:-1,maximum_bandwidth_sample_bandwidth:2e6,min_block_time_range_interval_ms:0,min_eval_interval:1e3,minimum_bandwidth_sample_duration:30,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,min_switch_interval:5e3,network_seg_timeout_ms:0,paused_stream_segments_count:2,per_stream_duration_target:0,playhead_nudge_slack:0,playhead_manager_timeupdate_throttle_ms:1e3,pixels_below_viewport_to_observe:0,pixels_above_viewport_to_observe:0,pre_start_buffer_ahead_target:10,resolution_constraint_factor:2,sbm_read_timeout_ms:0,seconds_to_stream:0,seconds_to_stream_near_bandwidth_boundary:0,seek_ahead_epsilon:0,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,skip_videobuffer_gaps_max_gap_size_sec:0,start_buffer_underflow_target:.1,stream_interrupt_check_mpd_stale_count_threshold:0,tagged_time_range_per_append_throttle:0,timeline_offset_threshold:0,time_to_first_byte_estimate_half_life_ms:500,prioritize_by_viewport_static_penalty:0,partial_playback_buffer_overflow:0};f.defaultNumbers=b;c={bandwidth_cache_key:"bandwidthEstimate",network_end_broadcasts_json:"[]",network_reload_mpd_json:"[]",network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}',network_skip_json:"[]",stream_types_eligible_for_partial_playback:""};f.defaultStrings=c}),null);
__d("MOzConfig",["MOzConfigDefaults","MOzExperiments"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.getBool=function(a){return typeof b("MOzExperiments")[a]==="boolean"?b("MOzExperiments")[a]:b("MOzConfigDefaults").defaultBools[a]};c.getNumber=function(a){return typeof b("MOzExperiments")[a]==="number"?b("MOzExperiments")[a]:b("MOzConfigDefaults").defaultNumbers[a]};c.getString=function(a){return typeof b("MOzExperiments")[a]==="string"?b("MOzExperiments")[a]:b("MOzConfigDefaults").defaultStrings[a]};c.getLegacyConfig=function(){return{getBool:function(a,c){return typeof b("MOzExperiments")[a]==="boolean"?b("MOzExperiments")[a]:(a=b("MOzConfigDefaults").defaultBools[a])!=null?a:c},getNumber:function(a,c){return typeof b("MOzExperiments")[a]==="number"?b("MOzExperiments")[a]:(a=b("MOzConfigDefaults").defaultNumbers[a])!=null?a:c},getString:function(a,c){return typeof b("MOzExperiments")[a]==="string"?b("MOzExperiments")[a]:(a=b("MOzConfigDefaults").defaultStrings[a])!=null?a:c}}};return a}();e.exports=a}),null);
__d("MOzDashPrefetchCache",["MVideoDashPrefetchCache"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.hasCacheValue=function(a){return b("MVideoDashPrefetchCache").hasCacheValue(a)};c.getCacheValue=function(a){return b("MVideoDashPrefetchCache").getCacheValue(a)};c.getCachedRepresentations=function(a){return null};return a}();e.exports=a}),null);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){var c=this;if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=c.$1});return b.length>0?b:[a[a.length-1]]};return a}();e.exports=a}),null);
__d("handleStreamErrorEvent",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=[0,1,1,2,3,5,8,13,21,34];function a(a,b){var c=b.code,d=JSON.parse(a.getString("network_end_broadcasts_json","[]"));if(d.includes(c)){b.endStream();return}d=JSON.parse(a.getString("network_skip_json","[]"));if(d.includes(c)){b.retry();return}d=a.getBool("back_off_pdash_504_retry",!0)?g[b.retryAttemptCount]:0;var e=JSON.parse(a.getString("network_reload_mpd_json","[]"));if(a.getBool("back_off_pdash_504_retry",!0)&&d==null){b.failPlayback();return}if(d!=null&&e.includes(c)){b.retryWithTimeout(d*1e3);return}e=JSON.parse(a.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}'));d=e[c];if(d){b.retryWithTimeout(d);return}b.failPlayback()}}),null);
__d("shouldUseOzPlayer",["FBLogger","MOzExperiments","ODS"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){c===void 0&&(c=!1);if(!b("MOzExperiments").mtouch_use_oz_player)return!1;b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","setup");var d,e=function(a){var c=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=c.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(!window.MediaSource.isTypeSupported(d)){b("FBLogger")("mtouch_video").debug("Unsupported DASH type: %s",d);return!0}}return!1};!a.dashManifest?d="noDashManifest":!window.MediaSource?d="noMediaSourceSupport":!window.fetch?d="noFetch":!window.ReadableStream?d="noReadableStream":e(a.dashManifest)&&(d="codecNotSupported");if(d){c&&b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","fallback."+d);return!1}return!0}}),null);
__d("MOzVideoPlayerApi",["EventListener","FBLogger","MMediaFactory","MOzConfig","MOzDashPrefetchCache","MOzExperiments","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","MVideoUtils","ODS","OzMinimumSmallestDimensionRestriction","VideoPlayerLoggerErrorStates","guid","handleManifestFetchErrorEvent","handleStreamErrorEvent","moz-player","moz-player/configs/DummyOzConfig","moz-player/configs/OzConfigUtils","moz-player/configs/OzGlobalConfig","moz-player/networks/OzBandwidthEstimator","moz-player/utils/OzError","shouldUseOzPlayer"],(function(a,b,c,d,e,f){b("moz-player/configs/OzGlobalConfig").setGlobalConfig(new(b("moz-player/configs/DummyOzConfig"))(b("MOzExperiments")));b("MMediaFactory").populate();var g=720;function h(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}function i(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"Error code "+a+" is unknown"}}function j(a,c,d){c=b("MVideoDashPrefetchCache").createQueryStringURL(c);c=b("MVideoDashPrefetchCache").getCacheValue(c);if(!c){a.push(d);return null}return c}function k(a,b){return a.find(function(a){return a.segment_type===b})}function l(a,b,c){var d=k(b,"init");b=k(b,"data");if(d){var e=j(a,d,c+" init");if(!e)return null;var f;b&&(f=j(a,b,c+" data"));return{initializationPromise:e,segmentPromise:f,mimeCodec:d.mime_codec,representationID:d.representation_id}}return null}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$MOzVideoPlayerApi4=null;d.$MOzVideoPlayerApi5=new(b("MOzConfig"))();d.getVideoQuality=function(){return d.$MOzVideoPlayerApi1};d.toggleVideoQuality=function(){if(!d.$MOzVideoPlayerApi2)return;var a=d.$MOzVideoPlayerApi2.getVideoQualities();if(!a||a.length===1)return;var b=a.indexOf(d.$MOzVideoPlayerApi1);b===-1&&(b=a.length-1);b=b>=a.length-1?0:b+1;a=a[b];d.$MOzVideoPlayerApi2.switchToVideoQuality(a);d.$MOzVideoPlayerApi1=a};return d}var d=c.prototype;d.postInit=function(){var a=this,c=this.$MOzVideoPlayerApi5;this.$MOzVideoPlayerApi6(c);try{var d=this.getVideoData().dashManifest;if(!d)throw new Error("No manifest available in VideoData. Aborting.");this.getSubscriptions().addSubscriptions(b("EventListener").listen(this.getVideoElement(),"error",this.$MOzVideoPlayerApi7.bind(this)));try{var e=[this.getPreInitLoggerProvider()];this.getVideoData().quickStarter&&(e=e.concat(this.getVideoData().quickStarter.getObservedOperationLoggers()));this.$MOzVideoPlayerApi2=new(b("moz-player"))({videoNodeOrQuickStarter:this.getVideoData().quickStarter||this.getVideoElement(),config:c,rawMpdXml:d,getVideoDimensions:function(){return a.getDimensions()},loggerConfig:{perfLoggerProviders:this.$MOzVideoPlayerApi8(),observedOperationLoggers:e},prefetchCache:new(b("MOzDashPrefetchCache"))(),entityKey:this.getVideoID(),videoPlaybackRestrictions:this.$MOzVideoPlayerApi9(),customRepresentationParsers:this.$MOzVideoPlayerApi10()})}catch(a){b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.createDashPlayer");throw a}this.$MOzVideoPlayerApi2.onError(function(b){return a.$MOzVideoPlayerApi11(b,"DashPlayer.onError")});this.$MOzVideoPlayerApi2.addListener("manifestFetchError",function(a){return b("handleManifestFetchErrorEvent")(c.getLegacyConfig(),a)});this.$MOzVideoPlayerApi2.addListener("streamError",function(a){return b("handleStreamErrorEvent")(c.getLegacyConfig(),a)});this.$MOzVideoPlayerApi2.addListener("mpdReady",function(b){a.$MOzVideoPlayerApi12()});this.$MOzVideoPlayerApi2.load()}catch(a){b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","failed.exception");this.$MOzVideoPlayerApi11(a,"caught");throw a}};d.$MOzVideoPlayerApi12=function(){var a=this.$MOzVideoPlayerApi2.getVideoQualities();a.length>1&&(this.$MOzVideoPlayerApi1=this.$MOzVideoPlayerApi2.getSelectedVideoQuality())};d.$MOzVideoPlayerApi9=function(){var a=[];this.getVideoData().defaultQuality==="HD"&&a.push(new(b("OzMinimumSmallestDimensionRestriction"))(g));return a};d.$MOzVideoPlayerApi10=function(){return{qualityLabel:function(a){try{return a.$.FBQualityLabel}catch(a){return null}}}};d.$MOzVideoPlayerApi6=function(a){if(!b("MOzExperiments").use_buffering_detector)return;this.$MOzVideoPlayerApi2.addListener("enterBuffering",this.$MOzVideoPlayerApi13.bind(this));this.$MOzVideoPlayerApi2.addListener("leaveBuffering",this.$MOzVideoPlayerApi14.bind(this))};d.$MOzVideoPlayerApi13=function(){this.getLogger().startBuffering(this.getVideoElement().currentTime),this.$MOzVideoPlayerApi3=this.getPreInitLoggerProvider().getOperationLogger("buffering").setType(this.isPlayScheduled()&&!this.isCurrentlyPlaying()?"start/unpause":"in_play").setInitiator(this.getLastActionReason()).start(),this.eventEmitter.emit("buffering")};d.$MOzVideoPlayerApi14=function(){this.getLogger().endBuffering(),this.$MOzVideoPlayerApi3&&(this.$MOzVideoPlayerApi3.log(),this.$MOzVideoPlayerApi3=null),this.eventEmitter.emit("buffered")};d.onTimeUpdateBase=function(c){a.prototype.onTimeUpdateBase.call(this,c),b("MVideoExperiments").send_representation_ended&&this.$MOzVideoPlayerApi15(c.target.currentTime)};d.$MOzVideoPlayerApi15=function(a){a=this.$MOzVideoPlayerApi2.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$MOzVideoPlayerApi4){var b=this.$MOzVideoPlayerApi4;this.$MOzVideoPlayerApi4=a;b!=null&&this.logEvent("representation_ended",{representation_id:b,next_representation_id:a})}};d.$MOzVideoPlayerApi11=function(a,c,d){d===void 0&&(d=b("VideoPlayerLoggerErrorStates").PLAYER_FAILURE);var e="(empty)",f="(empty)",g=null,j=null,k=null;if(a){k=a.stack;if(a instanceof b("moz-player/utils/OzError")){var l=a.getExtra();f=a.getType();e=a.getDescription();g=l.code;j=l.url}else a.message?e=a.message:a.code?e=h(a.code):e=a.toString(),a.code?f=i(a.code):a.name?f=a.name:f=a.toString(),e=f+" "+(e?e:"(unknown)"),f="OZ_JAVASCRIPT_NATIVE"}l=(c?c+": ":"")+e;this.logEvent("error",{error:f,error_description:l,state:d,httpStatus:g,url:j,stack:k})};d.getPlayerVersion=function(){return"mtouch_oz"};d.getStreamingFormat=function(){return"dash"};d.$MOzVideoPlayerApi7=function(a){b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.onMediaElementError");a=this.getVideoElement().error;a&&this.$MOzVideoPlayerApi11(a,"onError",b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)};d.$MOzVideoPlayerApi8=function(){var a=this,c=[];b("MVideoPlayerOzPerfLoggerProvider")&&b("MVideoPlayerOzPerfLoggerProvider").isEnabled&&typeof b("MVideoPlayerOzPerfLoggerProvider").isEnabled==="function"&&b("MVideoPlayerOzPerfLoggerProvider").isEnabled()&&(c.push(new(b("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!1,video:this.getVideoElement(),uniqueID:b("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:this.getVideoData().preloadTime,getBandwidthEstimate:function(){return b("moz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(a.$MOzVideoPlayerApi5.getLegacyConfig())}})),this.getVideoData().preloadTime=null);return c};d.shouldDisablePlayDelay=function(){return b("MOzExperiments").immediate_play};d.shouldIgnoreInitialMuteOperation=function(){return b("MOzExperiments").ignore_initial_mute_operation};d.unload=function(){b("MOzExperiments").fix_call_destroy&&this.$MOzVideoPlayerApi2.destroy();var c=this.getVideoData();c.quickStarter&&(c.quickStarter=null);a.prototype.unload.call(this)};c.prepare=function(a,c,d){a=b("MVideoUtils").getVideoDataFromMVideo(a);var e=b("shouldUseOzPlayer")(a);a.preloadTime=Date.now();if(b("MOzExperiments").precreate_video_node&&e){e=b("MMediaFactory").get();a.videoElement=e.node;b("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","precreate_video_node");if(e.quickStarter){a.quickStarter=e.quickStarter;if(c&&b("MOzExperiments").feed_quick_starter&&(!b("MOzExperiments").no_quickstarter_for_ctp||!d||d.isAutoplayable())){e=[];d=l(e,c.prefetch_data.video,"video");if(d){a.quickStarter.addPrefetchTrack(d);d=l(e,c.prefetch_data.audio,"audio");d&&a.quickStarter.addPrefetchTrack(d)}e.length!==0&&!b("MOzExperiments").no_prefetch_for_ctp&&b("FBLogger")("mtouch_oz").mustfix("Unable to feed OzQuickStarter because some of the prefetches are missing: %s",e.join(", "))}}}};d.getAdditionalLogData=function(c){var d=a.prototype.getAdditionalLogData.call(this,c);b("MVideoExperiments").send_representation_ended&&c!=="representation_ended"&&(d.representation_id=this.$MOzVideoPlayerApi4);this.$MOzVideoPlayerApi5&&(d.video_bandwidth=b("moz-player/networks/OzBandwidthEstimator").getBandwidth(this.$MOzVideoPlayerApi5.getLegacyConfig()));return d};return c}(b("MVideoPlayerApiBase"));e.exports=a}),null);
__d("MEmbeddedVideoAudioOnlyControl.react",["ix","cx","fbt","Image.react","MAbstractButton.react","React","asset"],(function(a,b,c,d,e,f,g,h,i){var j=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.onButtonClick=function(){this.props.onAudioOnlyClick&&this.props.onAudioOnlyClick()};d.render=function(){var a=this.props.useSmallIcon===!0;a=this.props.isAudioOnly?a?j.jsx(b("Image.react"),{className:"_90dl",src:g("532618")}):j.jsx(b("Image.react"),{className:"_4aea",src:g("532620")}):a?j.jsx(b("Image.react"),{className:"_90dl",src:g("503312")}):j.jsx(b("Image.react"),{className:"_4aea",src:g("511443")});var c=this.props.isAudioOnly?i._("Activer la vid\u00e9o"):i._("D\u00e9sactiver la vid\u00e9o"),d=j.jsx("span",{className:"_8_7w",children:c});return j.jsx(b("MAbstractButton.react"),{"aria-label":c,className:"_9032 _4aec _8_7x",image:a,imageRight:d,onClick:this.onButtonClick.bind(this),ref:"button",tabIndex:"0",type:"button"})};return c}(j.Component);e.exports=a}),null);
__d("MProgressiveVideoPlayerApi",["cx","CSS","DOM","MEmbeddedVideoAudioOnlyControl.react","MVideoExperiments","MVideoPlayerApiBase","ODS","React","ReactDOM","gkx","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$MProgressiveVideoPlayerApi1=!1;b.$MProgressiveVideoPlayerApi2=null;return b}var d=c.prototype;d.postInit=function(){a.prototype.postInit.call(this);var c=this.getVideoElement();this.$MProgressiveVideoPlayerApi4();var d=this.getShouldUseCustomControls();d?(this.getVideoElement().controls=!1,b("promiseDone")(this.setupControls())):this.$MProgressiveVideoPlayerApi5();c.load()};d.getShouldUseCustomControls=function(){if(this.getIsInMWERedesign())return!0;var a=this.getVideoData().playbackIsLiveStreaming;return a?b("gkx")("1782714"):!1};d.getEmbeddedVideoControlsConfig=function(){var a=this.getVideoData().playbackIsLiveStreaming,b=this.getIsInMWERedesign();return{playbackControlHidden:!1,scrubberHidden:a,playbackTimerHidden:a,fullScreenControlHidden:!1,allowAudioOnly:this.shouldAllowAudioOnlyToggle(),hideControlsOnEnd:b,displayPermalinkButton:b&&a}};d.$MProgressiveVideoPlayerApi6=function(){b("ReactDOM").render(h.jsx(b("MEmbeddedVideoAudioOnlyControl.react"),{isAudioOnly:this.$MProgressiveVideoPlayerApi1,onAudioOnlyClick:b("nullthrows")(this.$MProgressiveVideoPlayerApi3),useSmallIcon:!0}),this.$MProgressiveVideoPlayerApi2)};d.$MProgressiveVideoPlayerApi5=function(){var a=this,c=this.getVideoData(),d=this.getVideoElement(),e=c.audioOnlyVideoSrc;this.shouldAllowAudioOnlyToggle()&&e&&(this.$MProgressiveVideoPlayerApi2=b("DOM").create("div"),b("DOM").insertBefore(d,this.$MProgressiveVideoPlayerApi2),b("CSS").addClass(b("nullthrows")(this.$MProgressiveVideoPlayerApi2),"_903b"),this.$MProgressiveVideoPlayerApi3=function(){d.pause(),a.$MProgressiveVideoPlayerApi1?a.$MProgressiveVideoPlayerApi7(d,c.effectiveSrc):d.setAttribute("src",e),d.load(),d.play(),b("ODS").bumpEntityKey(2966,"MOzLivePlayer",c.audioOnly?"iOSAudioOnlyToggle.off":"iOSAudioOnlyToggle.on"),a.$MProgressiveVideoPlayerApi1=!a.$MProgressiveVideoPlayerApi1,a.$MProgressiveVideoPlayerApi6()},this.$MProgressiveVideoPlayerApi6())};d.$MProgressiveVideoPlayerApi7=function(a,c){Array.isArray(c)&&c.length===1&&(c=c[0]),Array.isArray(c)?c.forEach(function(c){a.appendChild(b("DOM").create("source",c))}):c&&a.setAttribute("src",c)};d.$MProgressiveVideoPlayerApi4=function(){var a=this.getVideoData(),b=this.getVideoElement();this.$MProgressiveVideoPlayerApi7(b,a.effectiveSrc)};d.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);this.$MProgressiveVideoPlayerApi1&&(c.audio_only=!0);return Object.assign({},b,c)};d.getPlayerVersion=function(){return"html5"};return c}(b("MVideoPlayerApiBase"));e.exports=a}),null);
__d("MSphericalVideoPlayerApi",["Bootloader","MProgressiveVideoPlayerApi","MVideoCache","MVideoUtils","promiseDone"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.getVideoQuality=function(){return d.$MSphericalVideoPlayerApi1};d.toggleVideoQuality=function(){if(d.getVideoElement().tagName!=="VIDEO"||b("MVideoCache").isSupported()&&b("MVideoCache").getCachedVideoByID(d.getVideoID()))return;var a=d.getVideoData().availableQualities;if(!a)return;var c;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&e!==d.$MSphericalVideoPlayerApi1){c=e;break}if(!c)return;d.$MSphericalVideoPlayerApi1=c;a=a[d.$MSphericalVideoPlayerApi1];if(!a)return;d.getVideoElement().pause();var f=d.getVideoElement().currentTime;d.getVideoElement().setAttribute("src",a);d.getVideoElement().currentTime=f;d.getVideoElement().load();d.getVideoElement().play()};return d}var d=c.prototype;d.postInit=function(){var c=this;a.prototype.postInit.call(this);this.getVideoElement().load();this.$MSphericalVideoPlayerApi1=this.getVideoData().defaultQuality;b("promiseDone")(this.setupControls().then(function(){return c.play(c.getVideoPlayReason())}));this.$MSphericalVideoPlayerApi3()};d.prepareDOMNode=function(){a.prototype.prepareDOMNode.call(this),this.getVideoElement().setAttribute("crossorigin","anonymous")};d.$MSphericalVideoPlayerApi3=function(){var a=this;if(this.$MSphericalVideoPlayerApi2)return;var c=this.getVideoData();c=c&&c.sphericalParams||{};var d={projectionType:c.projection,initialHeading:c.initialYaw,initialPitch:c.initialPitch,fieldOfView:c.initialFieldOfView,expansionCoef:1.01};c={disableTouchControls:c.disableSphericalTouchControls};var e={videoID:this.getVideoID(),logEvent:this.logEvent.bind(this),viewportConfig:c};b("Bootloader").loadModules(["MVideoPlayerHTML5Spherical"],function(b){a.$MSphericalVideoPlayerApi2=new b(a,a.getVideoElement(),d,e),a.play()},"MSphericalVideoPlayerApi")};d.show=function(){a.prototype.show.call(this),this.toggleClassOnMVideoElement(b("MVideoUtils").SPHERICAL_CLASS,!0)};d.play=function(b){if(!this.getEmbeddedVideoControls()||!this.$MSphericalVideoPlayerApi2)return;a.prototype.play.call(this,b)};d.getEmbeddedVideoControlsConfig=function(){return{fullScreenControlHidden:!0}};d.unload=function(){a.prototype.unload.call(this),this.$MSphericalVideoPlayerApi2&&(this.$MSphericalVideoPlayerApi2.unload(),this.$MSphericalVideoPlayerApi2=null)};d.getPlayerVersion=function(){return"mtouch_360"};return c}(b("MProgressiveVideoPlayerApi"));e.exports=a}),null);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1856513");c=b("FalcoLoggerInternal").create("cvc_v3_http_event",a);e.exports=c}),null);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","gkx","guid"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.$1=a;this.$2=b("guid")();this.$3=((a=c)!=null?a:"null")+"::"+((c=d)!=null?c:"null");this.$4=null;this.$5=null}var c=a.prototype;c.isValidSubscription=function(){return!!this.$1};c.makeCVCv3StateUpdate=function(a,c,d,e){var f=null;a!=null&&!Number.isNaN(a)&&c!=null&&!Number.isNaN(c)&&(f={m:e,pf:Math.floor((c-a)*b("DateConsts").MS_PER_SEC),s:d,sa:Math.floor(a*b("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};c.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return Object.assign({},a,e)};c.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};c.clearAnyPreviousContext=function(){this.$4=null};c.logHttpRequestSuccess=function(a){if(b("gkx")("1857547"))return;b("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null}})};c.logHttpRequestFailure=function(a,c){if(b("gkx")("1857547"))return;b("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:c!=null?c.toString():null}})};c.logHttpRequestTimeout=function(a){if(b("gkx")("1857547"))return;b("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null}})};c.logHttpResponseBad=function(a,c){if(b("gkx")("1857547"))return;b("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:c!=null?c.toString():null}})};return a}();e.exports=a}),null);
__d("XVideoUnifiedCVCController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/unified_cvc/",{})}),null);
__d("MVideoCVCv3Helper",["CVCv3SubscriptionHelper","DateConsts","MRequest","SubscriptionsHandler","XVideoUnifiedCVCController","clearInterval","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g=10;a=function(){function a(a,c){var d=this;this.$2=a;this.$10=c;this.$11=!1;this.$1=new(b("CVCv3SubscriptionHelper"))(a.getVideoID(),a.getPlayerOrigin(),a.getPlayerSuborigin());this.$4=null;this.$5=!1;this.$6=new(b("SubscriptionsHandler"))();this.$6.addSubscriptions(this.$2.eventEmitter.addListener("playing",function(){d.$4=null,d.$5=!1,d.startUpdates()}),this.$2.eventEmitter.addListener("paused",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("finished",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("updateStatus",function(a){d.$4==null&&(d.$4=a.position),!d.$5&&d.$4+3<=a.position&&(d.$2.logEvent("played_for_three_seconds"),d.$5=!0)}));this.$2.isPlayingState()&&this.startUpdates()}var c=a.prototype;c.startUpdates=function(){this.$12(0)};c.stopUpdates=function(){this.$4=null,this.$3&&(b("clearInterval")(this.$3),this.$3=null),b("clearTimeout")(this.$7),b("clearTimeout")(this.$8),this.$7=null,this.$8=null,this.$1.clearAnyPreviousContext(),this.$9=null};c.destroy=function(){this.stopUpdates(),this.$6.release()};c.$12=function(a){var c=this;if(this.$7!=null||this.$9!=null||this.$11)return;this.$7=b("setTimeout")(function(){c.$7=null;var a=c.$13(),d=Date.now(),e=!1;a.listen("done",function(b){if(a!=c.$9)return;c.$9=null;b=c.$1.processUnifiedResponse(b.payload);c.$14(b,d)});a.listen("error",function(a){e=!0,c.$1.logHttpRequestFailure(a!=null?a.toString():null,Date.now()-d)});c.$9=a;a.send();c.$8=b("setTimeout")(function(){e||c.$1.logHttpRequestTimeout(Date.now()-d),c.$15()},g*b("DateConsts").MS_PER_SEC)},a)};c.$15=function(){this.$9=null,this.$16(),this.$12(0)};c.$16=function(){b("clearTimeout")(this.$8),this.$8=null};c.$13=function(){var a={};this.$10&&(a.ls=!0);var c=0,d=0;this.$4!=null&&(c=this.$4,d=this.$2.getCurrentTimePosition());c=this.$1.makeUnifiedVideoCVCUpdate(c,d,this.$2.isPlayingState()?"playing":"stopped",this.$2.getVideoElement().muted,a);d={d:JSON.stringify(c)};a=new(b("MRequest"))(b("XVideoUnifiedCVCController").getURIBuilder().getURI()).setMethod("POST").setIgnoreErrors(!0).setData(d);return a};c.$14=function(a,c){c=Date.now()-c;if(a!=null){a.d!=null?this.$1.logHttpRequestSuccess(c):this.$1.logHttpResponseBad("no data field",c);this.$16();if(a.a!=null){var d=a.a.t;switch(d){case"p":d=a.a.pi;d==null&&(d=g);this.$12(d*b("DateConsts").MS_PER_SEC);break;case"s":this.$11=!0;break;default:break}}}else this.$1.logHttpResponseBad("null response",c)};return a}();e.exports=a}),null);
__d("XVideoCacheCleanUpController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:!0}})}),null);
__d("MVideoCacheCleanUp",["MRequest","MVideoCache","MVideoCacheConfig","MVideoDownloadConfig","MVideoDownloadStateHandler","XVideoCacheCleanUpController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1e4,h=null,i={clean:function(){i.deleteExpiredVideos();h=null;var a=b("MVideoCache").getCachedVideoIDs(!0);if(a.length==0){i.setLastCleanUpDate();return}a=b("XVideoCacheCleanUpController").getURIBuilder().setStringVector("video_ids",a).getURI();a=new(b("MRequest"))(a);a.setMethod("POST");a.listen("done",function(a){a=a.payload||{};if(!a.error){i.setLastCleanUpDate();a=[].concat(a.offlineDisabled,a.unaccessible,a.unsaved);a.length>0&&i.deleteVideosByID(a)}});a.send()},deleteExpiredVideos:function(){var a;a=(a=b("MVideoCache")).getCachedVideosMetadata([a.DOWNLOAD_STARTED_TIME,a.DOWNLOAD_REASON,a.OFFLINE_LIFESPAN]);var c=[],d=Date.now(),e=d-b("MVideoDownloadConfig").cache_auto_downloaded_videos_caching_interval_ms;for(var f in a){var g=a[f];(g.downloadReason==="auto_initiated"&&g.downloadStartedTime<e||g.downloadStartedTime<d-g.offlineLifespan)&&c.push(f)}c.length>0&&i.deleteVideosByID(c)},deleteVideosByID:function(a){b("MVideoCache").deleteVideosByID(a,function(a){b("MVideoDownloadStateHandler").deleted([a])},"cache_sync")},requestCleanUp:function(){if(b("MVideoCacheConfig").isSupported()&&b("MVideoCache").isSupported()){var a=i.getLastCleanUpDate(),c=Date.now()-b("MVideoDownloadConfig").cache_sync_interval_ms;a=a<c;a&&!h&&(h=b("setTimeoutAcrossTransitions")(function(){b("MVideoCache").makeLocalAsyncStorageConsistent(i.clean,function(a){b("MVideoDownloadStateHandler").deleted([a])})},g))}},getLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported())return b("MVideoCacheConfig").getItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported()){var a=Date.now();b("MVideoCacheConfig").setItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp,a)}},checkAccess:function(a){a=a.downloadStartedTime;var c=i.getLastCleanUpDate();a=Math.max(a,c);c=Date.now();i.requestCleanUp();a=a+b("MVideoDownloadConfig").allowed_offline_access_interval_ms;a=a>c;return a}};e.exports=i}),null);
__d("MVideoMediaSourceState",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$2=!1,this.$1=!1,this.$3=a}var b=a.prototype;b.getMediaSource=function(){return this.$3};b.videoStreamEnded=function(){this.$2=!0,this.$4()};b.audioStreamEnded=function(){this.$1=!0,this.$4()};b.$4=function(){this.$1&&this.$2&&this.$3.endOfStream()};return a}();e.exports=a}),null);
__d("showVideoUnavailableDialog",["fbt","MCustomDialog"],(function(a,b,c,d,e,f,g){e.exports=a;function a(){var a=g._("Les vid\u00e9os ne sont plus disponibles"),c=g._("Veuillez vous connecter \u00e0 Internet et r\u00e9essayer."),d=g._("OK");b("MCustomDialog").show({titleString:a,descriptionString:c,dismissButtonString:d})}}),null);
__d("MInlineVideo",["EventListener","FBLogger","MFullScreen","MLegacyDataStore","MOzLiveVideoPlayerApi","MOzVideoPlayerApi","MProgressiveVideoPlayerApi","MSphericalVideoPlayerApi","MVideoCache","MVideoCacheCleanUp","MVideoCVCv3Helper","MVideoDownloadConfig","MVideoExperiments","MVideoMediaSourceState","MVideoUtils","Stratcom","SubscriptionsHandler","emptyFunction","getElementPosition","qex","shouldUseOzPlayer","showVideoUnavailableDialog","throttle"],(function(a,b,c,d,e,f){var g,h,i=!1,j=null,k=null,l;function a(a,c){c&&(g=c);if(i)return;a&&a.setup();b("Stratcom").listen("click",b("MVideoUtils").PLAY_SIGIL,x);b("Stratcom").listen("click",b("MVideoUtils").VIDEO_END_SCREEN_WATCH_AGAIN_SIGIL,w);b("Stratcom").listen("m:page:unload",null,n);c=["m:jewel:flyout:open","m:popup:show","m:side-area:show","m:feed-ufi:show","m:chrome:tab:show"];b("Stratcom").listen(c,null,o);b("MVideoExperiments").remove_hidden_video_on_blur&&b("EventListener").listen(window,"blur",F);i=!0}function m(){j&&j.isVisible()&&j.getVideoData().playInFullScreen&&!b("MFullScreen").isFullScreen()&&(n(),b("MFullScreen").removeFullScreenEventListeners(window,m))}function n(){if(!j)return;b("MVideoExperiments").reuse_api_instance?j.unload():j.destroy();k!=null&&(k.destroy(),k=null);j=null;h=null;l&&(l.release(),l=null)}function o(){if(!j||!j.hasActivePlayer())return;b("MLegacyDataStore").get(h).type!=="video"?n():j&&(j.pause("page_visibility_initiated"),j.hide())}function p(){return j?j.getLastActionReason():"user_initiated"}function c(){return h}function q(a){j&&j.pause(a)}function r(a){j&&j.play(a)}function d(){j&&j.unmute()}function e(){j&&j.mute()}function s(a){j&&j.setLastActionReason(a)}function t(a,c){var d=null,e=null;c.videoCodec?(d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+c.videoCodec+'"'),d.addEventListener("updateend",function(){a.videoStreamEnded()},!1)):a.videoStreamEnded();c.audioCodec?(e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+c.audioCodec+'"'),e.addEventListener("updateend",function(){a.audioStreamEnded()},!1)):a.audioStreamEnded();c.videoCodec&&b("MVideoCache").getCachedVideoStream(c,function(a){var b=new FileReader();b.addEventListener("loadend",function(){d.appendBuffer(b.result)});b.readAsArrayBuffer(a)},b("emptyFunction"));c.audioCodec&&b("MVideoCache").getCachedAudioStream(c,function(a){var b=new FileReader();b.addEventListener("loadend",function(){e.appendBuffer(b.result)});b.readAsArrayBuffer(a)},b("emptyFunction"))}function u(a,c){var d=null,e=null,f=null,g=null,h=function(a,b,c){b.getNextBuffer(function(b){if(b){var d=new FileReader();d.addEventListener("loadend",function(){a.appendBuffer(d.result)});d.readAsArrayBuffer(b)}else c()})};c.videoCodec?(f=b("MVideoCache").getCachedVideoStreamObject(c),d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+c.videoCodec+'"'),d.addEventListener("updateend",function(){h(d,f,function(){a.videoStreamEnded()})},!1)):a.videoStreamEnded();c.audioCodec?(g=b("MVideoCache").getCachedAudioStreamObject(c),e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+c.audioCodec+'"'),e.addEventListener("updateend",function(){h(e,g,function(){a.audioStreamEnded()})},!1)):a.audioStreamEnded();c.videoCodec&&h(d,f,function(){a.videoStreamEnded()});c.audioCodec&&h(e,g,function(){a.audioStreamEnded()})}function v(a){if(!j||!j.isVisible())return;j.isPlayingState()?q("user_initiated"):r("user_initiated")}function w(a,c,d,e){c||(c=a.getNode(b("MVideoUtils").INSERTION_POINT_SIGIL));if(!c){b("FBLogger")("mtouch_video").warn("newVideoElement is not defined");return}if(j&&j.getMVideoElement()===c){r(e);return}a=b("MVideoUtils").getVideoDataFromMVideo(c);a.muted=a.playMuted!=null?a.playMuted:!!d;(!j||j.getMVideoElement()!==c)&&(b("Stratcom").invoke("m:video:player:prepare",null,{videoElement:c}),n(),h=c,(h===null||h===void 0)&&b("FBLogger")("mtouch_video").warn("mVideoContainer is not available"),j=z(a),j.init(e));j.show();j.play(e)}function x(a,b,c,d){y(a,b,c,d)}function y(a,c,d,e){c||(c=a.getNode(b("MVideoUtils").INSERTION_POINT_SIGIL));if(!c){b("FBLogger")("mtouch_video").warn("newVideoElement is not defined");return!1}e=e||"user_initiated";var f=b("MVideoUtils").getVideoDataFromMVideo(c),g=b("MVideoCache").isVideoDownloading(f.videoID);if(g)return!1;if(j&&j.getMVideoElement()===c&&j.isVisible()){b("qex")._("773042")&&v(a);return!1}a&&a.prevent();f.effectiveSrc=f.src;var h=b("MVideoCache").isSupported()&&f.canUseOffline&&b("MVideoCache").getCachedVideoByID(f.videoID);if(h){g=h&&b("MVideoCacheCleanUp").checkAccess(h);b("MVideoCache").logPlaybackRequest(f.videoID,g,e);if(!g){b("showVideoUnavailableDialog")();return!1}else{var i=new(b("MVideoMediaSourceState"))(new MediaSource());i.getMediaSource().addEventListener("sourceopen",function(){b("MVideoDownloadConfig").cache_chunked_playback_enabled?u(i,h):t(i,h)},!1);f.effectiveSrc=window.URL.createObjectURL(i.getMediaSource())}}f.muted=f.playMuted!=null?f.playMuted:!!d;return A(a,c,f,e)}function z(a){a=B(a);return new a(h)}function A(a,c,d,e){(!j||j.getMVideoElement()!==c)&&(b("Stratcom").invoke("m:video:player:prepare",null,{videoElement:c}),n(),h=c,(h===null||h===void 0)&&b("FBLogger")("mtouch_video").warn("mVideoContainer is not available"),b("MVideoExperiments").create_api_on_serverside?(j=d[b("MVideoUtils").API_INSTANCE_KEY],j||(b("MVideoExperiments").reuse_api_instance&&b("FBLogger")("mtouch_video").mustfix("_videoUnit is expected but not found"),j=z(d))):j=z(d),j.init(e),g&&g.setVideoUnit(j),d.playbackIsLiveStreaming&&(k=new(b("MVideoCVCv3Helper"))(j,d.playbackIsLiveStreaming)));j.show();c=d.playOnClick&&d.type==="video";c&&(j.play(e),k!=null&&k.startUpdates(),d.playInFullScreen&&b("MFullScreen").isSupported()&&(b("MFullScreen").listenForFullScreenEvent(window,m),d.useOzLive?(b("MFullScreen").enableFullScreen(h),screen&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape")):b("MFullScreen").enableFullScreen(j.getVideoElement())));j.showLoadingSpinner();C(h,d,j.getVideoElement());a&&b("MVideoUtils").handleLoggingOnPlay(a,j,d);return c}function B(a){if(a.useOzLive)return b("MOzLiveVideoPlayerApi");else if(b("MVideoExperiments").enableSphericalVideo&&a.spherical)return b("MSphericalVideoPlayerApi");else if(b("shouldUseOzPlayer")(a,!0))return b("MOzVideoPlayerApi");return b("MProgressiveVideoPlayerApi")}function C(a,c,d){var e=500;c.videoScrollUseLowThrottleRate&&(e=200);l||(l=new(b("SubscriptionsHandler"))());l.addSubscriptions(b("Stratcom").listen("scroll",null,b("throttle")(function(){return D(a,c,d)},e)))}function D(a,c,d){if(!j)return;c=b("MFullScreen").isFullScreen()||b("MVideoUtils").isVisible(b("getElementPosition")(a));d=j.isPlayingState();!c&&d&&p()!=="autoplay_initiated"?q("video_visibility_initiated"):c&&!d&&p()==="video_visibility_initiated"&&r("video_visibility_initiated")}function E(){return j?j.isPlayScheduled()?b("MVideoUtils").PLAYER_STATE.playing:b("MVideoUtils").PLAYER_STATE.paused:b("MVideoUtils").PLAYER_STATE.paused}function F(){j&&!j.isVisible()&&n()}f.getLastActionReason=p;f.getPlayerState=E;f.getPlayerDOMVideoElement=c;f.pause=q;f.play=r;f.removePlayer=n;f.setLastActionReason=s;f.setupListeners=a;f.showPlayer=y;f.unmute=d;f.mute=e}),null);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.isVisible=function(){throw new Error("Should be overridden")};c.getDistanceToViewport=function(){throw new Error("Should be overridden")};c.playWithoutUnmute=function(a){throw new Error("Should be overridden")};c.prepareForPlay=function(){throw new Error("Should be overridden")};c.pause=function(a){throw new Error("Should be overridden")};c.isAutoplayable=function(){throw new Error("Should be overridden")};c.getDOMPosition=function(){throw new Error("Should be overridden")};c.isLooping=function(){throw new Error("Should be overridden")};c.isState=function(a){throw new Error("Should be overridden")};c.setLastActionReason=function(a){throw new Error("Should be overridden")};return b}(b("EventEmitter"));e.exports=a}),null);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("MVideoPrefetcher",["Promise","MVideoAutoplayConfig","Run"],(function(a,b,c,d,e,f){var g=null,h=500;a=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}var c=a.prototype;c.$7=function(a,c,d){d.lastProgressValue*1e3>b("MVideoAutoplayConfig").autoplay_prefetch_duration_threshold_ms||d.video.duration&&d.lastProgressValue>.9*d.video.duration?(clearInterval(d.watchdog),this.$8(d),this.$2.set(d.url,!0),a()):(clearInterval(d.watchdog),this.$8(d),c(new Error("Insufficient data received for a video preload")))};c.$9=function(a){var c=this,d=document.createElement("video");d.setAttribute("src",a);d.setAttribute("preload","auto");var e={};e.video=d;e.lastProgressTime=Date.now();e.lastProgressValue=0;e.url=a;var f=new(b("Promise"))(function(a,f){e.watchdog=setInterval(function(){var d=Date.now();d>e.lastProgressTime+b("MVideoAutoplayConfig").autoplay_prefetch_waiting_time_ms&&c.$7(a,f,e)},h),d.addEventListener("progress",function(){var a=d.buffered&&d.buffered.end&&d.buffered.length>0?d.buffered.end(0):0;a>e.lastProgressValue&&(e.lastProgressValue=a,e.lastProgressTimestamp=Date.now())})});this.$10(a,f);this.$3.push(e);d.load();return f};c.$11=function(b){var c=[];for(var d=0;d<b.length;d++){var e=a.createQueryStringURL(b[d]);this.$1.has(e)||c.push(this.$9(e))}return c};c.$12=function(a){var c=this;this.$5++;a=this.$11(a.video);b("Promise").all(a).then(function(){c.$13()})["catch"](function(){return c.$13()})};c.$10=function(a,c){var d=this,e=!!this.$1.values().next().done;e&&b("Run").onLeave(function(){for(var a=0;a<d.$3.length;a++)d.$14(d.$3[a]);d.$3=[];d.$4=[];d.$5=0;d.$1.clear()});this.$1.set(a,c)};c.$14=function(a){a=a.video;a.setAttribute("src","");a.load&&a.load()};c.$8=function(a){this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};c.$13=function(){this.$5--;var a=this.$4.shift();a&&this.$12(a)};c.getAndDelete=function(a){var b=this.$1.get(a);this.$1["delete"](a);return b};c.getPreloadCache=function(a){return this.$2.get(a)};c.queueRequestBatch=function(a){this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};a.getInstance=function(){g===null&&(g=new a());return g};a.createQueryStringURL=function(a){return a.url};a.loadVideo=function(b){var c=a.getInstance();c.queueRequestBatch({video:[{url:b}]})};a.isVideoPreloaded=function(b){return!!a.getInstance().getPreloadCache(b)};return a}();e.exports=a}),null);
__d("MVideoPlayerController",["EventEmitter","MInlineVideo","MLegacyDataStore","MOzExperiments","MOzVideoPlayerApi","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPrefetcher","Stratcom","destroyOnUnload","getElementPosition","gkx","shouldUseOzPlayer"],(function(a,b,c,d,e,f){var g="MVideoPlayerController_instance",h=null,i=null;a=function(a){babelHelpers.inheritsLoose(c,a);function c(d,e,f,g){var h;h=a.call(this)||this;h.$MVideoPlayerController2=e.video_ids;h.$MVideoPlayerController3=d.video_element;h.$MVideoPlayerController1=d.root_element;h.$MVideoPlayerController6=f;h.$MVideoPlayerController7=g;!b("MOzExperiments").no_prefetch_for_ctp&&!b("MOzExperiments").no_quickstarter_for_ctp&&(h.prefetch(),h.prepareMVideoPlayerApi());h.$MVideoPlayerController4="ready";h.$MVideoPlayerController8(h.$MVideoPlayerController3);h.$MVideoPlayerController5=null;c.$MVideoPlayerController9();return h}var d=c.prototype;d.prepareMVideoPlayerApi=function(a){b("MOzVideoPlayerApi").prepare(this.$MVideoPlayerController3,this.$MVideoPlayerController6,a)};d.prefetch=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;if(!this.$MVideoPlayerController6)return;this.$MVideoPlayerController6.connection_quality_level?b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials,this.$MVideoPlayerController6.connection_quality_level):b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials)};d.isFullscreen=function(){return!1};d.getVideoID=function(){return this.$MVideoPlayerController2[0]};d.play=function(a){this.emit("playRequested",a),this.sendPlayRequest(a)};d.prepareForPlay=function(){};d.sendPlayRequest=function(a){var c=!0;c=b("MInlineVideo").showPlayer(null,this.$MVideoPlayerController3,c,a);(!c||!b("MVideoExperiments").mtouch_no_double_play)&&b("MInlineVideo").play(a)};d.pause=function(a){this.emit("pauseRequested",a),b("MInlineVideo").pause(a)};d.isAutoplayable=function(){return!1};d.getDOMPosition=function(){return b("getElementPosition")(this.getRootNode())};d.setState=function(a){this.$MVideoPlayerController4=a,this.emit("stateChange")};d.isState=function(a){return this.$MVideoPlayerController4===a};d.getVideoNode=function(){return this.$MVideoPlayerController3};d.getRootNode=function(){return this.$MVideoPlayerController1};d.setLastActionReason=function(a){this.$MVideoPlayerController5=a,a&&b("MInlineVideo").setLastActionReason(a)};d.getLastActionReason=function(){return this.$MVideoPlayerController5};d.preload=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3),c=a&&a.src;c&&!b("shouldUseOzPlayer")(a)&&b("MVideoPrefetcher").loadVideo(c)};d.isPreloaded=function(){var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3);a=a&&a.src;return a&&b("MVideoPrefetcher").isVideoPreloaded(a)};c.$MVideoPlayerController9=function(){if(h)return;h=[b("Stratcom").listen("m:video:player:play",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiBeginPlayback(a);!i&&b("MVideoExperiments").refresh_browser_autoplay_settings&&(i=null)}),b("Stratcom").listen("m:video:player:pause",null,function(a){var b=c.$MVideoPlayerController10(a);a=!!(a.getData()&&a.getData().destroyed);c.handleApiPausePlayback(b,a)}),b("Stratcom").listen("m:video:player:ended",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFinishPlayback(a)}),b("Stratcom").listen("m:video:player:volumechange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiVolumeChange(a)}),b("Stratcom").listen("m:video:player:fullscreenchange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFullScreenChange(a)}),b("Stratcom").listen("m:video:player:prepare",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiPrepare(a)}),b("Stratcom").listen("m:video:player:destroy",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiDestroyed(a)})];b("destroyOnUnload")(function(){h&&(h.forEach(function(a){return a.remove()}),h=null)})};c.handleApiBeginPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController11()};c.handleApiPausePlayback=function(a,c){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController12(c)};c.handleApiFinishPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController13()};c.handleApiVolumeChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController14()};c.handleApiFullScreenChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController15()};c.handleApiDestroyed=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController16()};c.handleApiPrepare=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController17()};d.$MVideoPlayerController11=function(){this.setState("playing")};d.$MVideoPlayerController12=function(a){!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};d.$MVideoPlayerController13=function(){this.setState("finished")};d.$MVideoPlayerController14=function(){this.emit("volumeChange")};d.$MVideoPlayerController15=function(){this.emit("fullscreenChange")};d.$MVideoPlayerController16=function(){this.setState("ready"),this.emit("destroyed")};d.$MVideoPlayerController17=function(){this.emit("prepare")};d.$MVideoPlayerController8=function(a){var c={};c[g]=this;b("MLegacyDataStore").set(a,c)};c.$MVideoPlayerController10=function(a){a=a.getData();return a&&a.videoElement};c.isBrowserAutoplayEnabled=function(){if(i===null){var a=document.createElement("video");a.muted=!0;b("gkx")("1706777")&&a.setAttribute("playsinline","playsinline");var c=a.play();i=!a.paused;c!=null&&c.then(function(){a.pause()})["catch"](function(){})}return i};return c}(b("EventEmitter"));e.exports=a}),null);
__d("MFeedVideoPlayerController",["MFullScreen","MOzExperiments","MVideoAutoplayConfig","MVideoAutoplayPlayerBase","MVideoCache","MVideoDownloadState","MVideoDownloadStateHandler","MVideoExperiments","MVideoNetworkUtils","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","Visibility","destroyOnUnload","getViewportDimensions","qex"],(function(a,b,c,d,e,f){var g=.5;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$MFeedVideoPlayerController1=d;e.$MFeedVideoPlayerController2=c;e.$MFeedVideoPlayerController3=d.controller;e.$MFeedVideoPlayerController5=!1;e.$MFeedVideoPlayerController4=[];b("destroyOnUnload")(function(){e.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),e.$MFeedVideoPlayerController4=[]});e.$MFeedVideoPlayerController6();if(b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_quickstarter_for_ctp){c=e.isAutoplayable();!e.$MFeedVideoPlayerController1.disable_preload&&(!b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_prefetch_for_ctp&&c)&&e.$MFeedVideoPlayerController3.prefetch();e.$MFeedVideoPlayerController3.prepareMVideoPlayerApi(babelHelpers.assertThisInitialized(e))}e.$MFeedVideoPlayerController1.should_autoplay&&!e.$MFeedVideoPlayerController1.disable_preload&&e.$MFeedVideoPlayerController7();return e}var d=c.prototype;d.$MFeedVideoPlayerController7=function(){b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};d.$MFeedVideoPlayerController8=function(){var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a==="off")return!1;else if(b("MVideoCache").isVideoDownloaded(this.getVideoID()))return!1;else if(a==="wifi_only"&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a==="on"&&this.$MFeedVideoPlayerController9())return!0;return!1};d.$MFeedVideoPlayerController9=function(a){var c=b("MVideoNetworkUtils").getNetworkBandwidth();if(!c)if(b("MVideoExperiments").desktop_no_bandwidthmax)return!0;else c=0;var d=b("MVideoNetworkUtils").getConnectivityType(),e=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:b("MVideoAutoplayConfig").autoplay_bandwidth_threshold_mbps;d=(!a||d===a)&&c>=e;return d};d.isVisible=function(){if(this.$MFeedVideoPlayerController3.isFullscreen()||b("MFullScreen").isFullScreen())return!0;return b("Visibility").isSupported()&&b("qex")._("1238958")&&b("Visibility").isHidden()?!1:b("MVideoUtils").isVisible(this.getDOMPosition())};d.getDistanceToViewport=function(){if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=b("getViewportDimensions")().height,c=this.getDOMPosition();if(c.height===0)return-Infinity;c=c.y+(1-g)*c.height;return c-a/2};d.playWithoutUnmute=function(a){this.$MFeedVideoPlayerController3.play(a)};d.prepareForPlay=function(){!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&b("MVideoAutoplayConfig").autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};d.pause=function(a){this.$MFeedVideoPlayerController3.pause(a)};d.isAutoplayable=function(){var a=!1,c=this.getVideoID();b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(b("MVideoCache").isVideoDownloaded(c)?a=!1:this.$MFeedVideoPlayerController8()&&(b("MVideoAutoplayConfig").autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};d.getDOMPosition=function(){return this.$MFeedVideoPlayerController3.getDOMPosition()};d.isLooping=function(){return!1};d.getVideoID=function(){return this.$MFeedVideoPlayerController3.getVideoID()};d.$MFeedVideoPlayerController6=function(){var a=this,c=[["stateChange",function(b){return a.$MFeedVideoPlayerController10(b)}]],d=function(b){return a.emit.bind(a,b)};this.$MFeedVideoPlayerController4=c.map(function(b){return a.$MFeedVideoPlayerController3.addListener(b[0],b[1])}).concat(b("MVideoPlayerApiEvents").map(function(b){return a.$MFeedVideoPlayerController3.addListener(b,d(b))}));b("MVideoDownloadStateHandler").listen(this.getVideoID(),function(b){return a.$MFeedVideoPlayerController11(b)})};d.$MFeedVideoPlayerController10=function(){this.$MFeedVideoPlayerController12()};d.$MFeedVideoPlayerController12=function(){(!this.isState("playing")&&this.getLastActionReason()==="user_initiated"||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};d.$MFeedVideoPlayerController11=function(a){a.state===b("MVideoDownloadState").DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};d.isState=function(a){return this.$MFeedVideoPlayerController3.isState(a)};d.getLastActionReason=function(){return this.$MFeedVideoPlayerController3.getLastActionReason()};d.setLastActionReason=function(a){this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};return c}(b("MVideoAutoplayPlayerBase"));e.exports=a}),null);
__d("MVideoAutoplayControllerBase",["Stratcom","SubscriptionsHandler","Visibility","destroyOnUnload","qex","throttle"],(function(a,b,c,d,e,f){a=function(){function a(a){var c=this;this.$3=null;this.$2=null;this.$6=[];this.$1=a;this.$4=null;this.$5=new(b("SubscriptionsHandler"))();b("destroyOnUnload")(function(){c.$6=[],c.$3=null,c.$4&&(c.$4.remove(),c.$4=null),c.$5.release()})}var c=a.prototype;c.getVideoUnits=function(){return this.$6};c.addVideoUnit=function(a){this.$6.push(a)};c.getPlayingVideoUnit=function(){return this.$3};c.setPlayingVideoUnit=function(a){this.$3=a};c.playVideo=function(a,b){this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};c.addSubscriberVideoUnit=function(){if(!this.getVideoUnits().length){var a,c;this.$5.addSubscriptions((a=b("Stratcom")).listen("resize",null,this.updateAutoplay.bind(this)),a.listen("blur",null,this.$8.bind(this)),a.listen("focus",null,this.$9.bind(this)),(c=b("Visibility")).addListener(c.HIDDEN,this.$8.bind(this)),c.addListener(c.VISIBLE,this.$9.bind(this)),a.listen("MScrollArea:scrollend",null,(c=b("throttle"))(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:scroll",null,c(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:create",null,c(this.updateAutoplay.bind(this),this.$1)),a.listen("MScrollArea:reflow",null,c(this.updateAutoplay.bind(this),this.$1)));this.$10()||this.$11()}};c.$8=function(){this.autoplayActive()&&!this.$2&&(this.$2=this.getPlayingVideoUnit(),this.pausePlayingVideo("page_visibility_initiated")),b("qex")._("1238959")&&this.updateAutoplay()};c.$9=function(){this.autoplayActive()&&this.$2&&(this.playVideo(this.$2,"page_visibility_initiated"),this.$2=null),b("qex")._("1238960")&&this.updateAutoplay()};c.$11=function(){this.$4&&(this.$4.remove(),this.$4=null),this.$7=b("throttle")(this.updateAutoplay.bind(this),this.$1),this.$4=b("Stratcom").listen("scroll",null,this.$12.bind(this))};c.$12=function(){this.$7()};c.$10=function(){return!!this.$4};c.getClosestVideoUnits=function(a,b){return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};c.getVisibleUnits=function(){var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};c.pausePlayingVideo=function(a){var b=this.$3;b&&(b.pause(a),this.$3=null)};c.updateAutoplay=function(){throw new Error("Should be overridden")};c.autoplayActive=function(){throw new Error("Should be overridden")};return a}();e.exports=a}),null);
__d("MVideoAutoplayControllerX",["MVideoAutoplayControllerBase","SubscriptionsHandler","destroyOnUnload","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f){var g=null,h=500;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,h)||this;c.$MVideoAutoplayControllerX1=!0;c.$MVideoAutoplayControllerX2=new(b("SubscriptionsHandler"))();c.$MVideoAutoplayControllerX3=null;b("destroyOnUnload")(function(){c.$MVideoAutoplayControllerX4(),babelHelpers.assertThisInitialized(c)===g&&(g=null)});return c}c.registerVideoUnit=function(a){g==null&&(g=new c()),g.addSubscriberVideoUnit(),g.addVideoUnit(a),g.$MVideoAutoplayControllerX5(a),a.isVisible()&&g.updateAutoplay()};c.setShouldAutoplay=function(a){g==null&&(g=new c()),g.$MVideoAutoplayControllerX1=a,g.updateAutoplay()};var d=c.prototype;d.$MVideoAutoplayControllerX4=function(){this.$MVideoAutoplayControllerX2.release()};d.$MVideoAutoplayControllerX6=function(a){a&&(a.setLastActionReason("user_initiated"),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};d.$MVideoAutoplayControllerX5=function(a){var b=this;if(!a.addListener)return;var c=function(){b.getPlayingVideoUnit()==a&&a.isState("paused")||b.getPlayingVideoUnit()!=a&&a.isState("playing")?b.$MVideoAutoplayControllerX6(a):a==b.$MVideoAutoplayControllerX3&&a.isState("finished")&&b.$MVideoAutoplayControllerX6(null)},d=function(){(a.isState("playing")||a.isState("paused"))&&b.$MVideoAutoplayControllerX6(a)},e=function(){b.getPlayingVideoUnit()!=a&&b.$MVideoAutoplayControllerX6(a)},f=function(){b.updateAutoplay()},g=function(){b.$MVideoAutoplayControllerX3&&b.$MVideoAutoplayControllerX3==a&&b.$MVideoAutoplayControllerX6(null)};this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",c),this.$MVideoAutoplayControllerX7(a,"prepare",e),this.$MVideoAutoplayControllerX7(a,"volumeChange",d),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",d),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",f),this.$MVideoAutoplayControllerX7(a,"destroyed",g))};d.$MVideoAutoplayControllerX7=function(a,c,d){a=a.addListener(c,function(){b("setImmediate")(function(){d()})});return a};d.autoplayActive=function(){this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};d.updateAutoplay=function(){if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo("autoplay_initiated");return}var a=this.getVisibleUnits(),c=a.length,d=null;if(c==1)d=a[0],d=d.isAutoplayable()?d:null;else if(c>1){var e=b("getViewportDimensions")().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-e);a.playPriority=b;(!d||typeof d.playPriority==="number"&&a.playPriority<d.playPriority)&&(d=a)})}this.getPlayingVideoUnit()?d!=this.getPlayingVideoUnit()&&(this.pausePlayingVideo("autoplay_initiated"),this.playVideo(d,"autoplay_initiated")):d&&this.playVideo(d,"autoplay_initiated");c=this.getClosestVideoUnits(2,!0);a=c.length;var f=null;for(var g=0;g<a;g++)if(c[g]!==d){f=c[g];break}f&&f.prepareForPlay()};return c}(b("MVideoAutoplayControllerBase"));e.exports=a}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f){f.registerVideoUnit=a;function a(a,c){a=new(b("MFeedVideoPlayerController"))(a,c);b("MVideoAutoplayControllerX").registerVideoUnit(a)}}),null);